/*-- scss:defaults --*/

/*-- scss:defaults --*/

// Optimized font declarations with CLS fixes
// FIRA CODE - monospace for code
@font-face {
  font-family: 'Fira Code';
  src: url('assets/fonts/FiraCode-VariableFont_wght.woff2') format('woff2');
  // url('/assets/fonts/FiraCode-VariableFont_wght.woff') format('woff');
  font-weight: 300 700;
  font-style: normal;
  font-display: swap;
  size-adjust: 100%;
}

// LORA - for headings (serif)
// Normal styles
@font-face {
  font-family: 'Lora';
  src: url('assets/fonts/Lora-VariableFont_wght.woff2') format('woff2');
  // url('/assets/fonts/Lora-VariableFont_wght.woff') format('woff');
  font-weight: 400 700;
  font-style: normal;
  font-display: swap;
  size-adjust: 94%;
}

// POPPINS - for body text and UI elements (sans-serif)
// Regular weight for body text
@font-face {
  font-family: 'Poppins';
  src: url('assets/fonts/Poppins-Regular.woff2') format('woff2');
  // url('/assets/fonts/Poppins-Regular.woff') format('woff');
  font-weight: 400;
  font-style: normal;
  font-display: swap;
  size-adjust: 100%;
}

// Medium weight for navigation, buttons, emphasis
@font-face {
  font-family: 'Poppins';
  src: url('assets/fonts/Poppins-Medium.woff2') format('woff2');
  // url('/assets/fonts/Poppins-Medium.woff') format('woff');
  font-weight: 500;
  font-style: normal;
  font-display: swap;
  size-adjust: 100%;
}

// Bold weight for strong emphasis, job titles, dates
@font-face {
  font-family: 'Poppins';
  src: url('assets/fonts/Poppins-Bold.woff2') format('woff2');
  // url('/assets/fonts/Poppins-Bold.woff') format('woff');
  font-weight: 700;
  font-style: normal;
  font-display: swap;
  size-adjust: 100%;
}

// Regular italic for emphasis in body text, references
@font-face {
  font-family: 'Poppins';
  src: url('assets/fonts/Poppins-Italic.woff2') format('woff2');
  // url('/assets/fonts/Poppins-Italic.woff') format('woff');
  font-weight: 400;
  font-style: italic;
  font-display: swap;
  size-adjust: 100%;
}

// Color system - organized hierarchically
$primary: #43494D;
$secondary: #2C3033;
$dark-gray: #212529;
$medium-gray: #596166;
$light-gray: #5A6266;
$gray-light: #F7F9FA;
$border-color: #dee2e6;

// Base colors
$body-bg: white;
$body-color: $primary;

// Typography with CLS-optimized fallbacks
$font-family-sans-serif: "Poppins", Arial, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
$font-family-serif: "Lora", Georgia, "Times New Roman", serif;
$font-family-monospace: "Fira Code", "Courier New", SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
$headings-font-family: $font-family-serif;
$headings-font-weight: 400;

// Link styling
$link-color: $primary;
$link-decoration: underline;
$link-hover-color: $light-gray;
$link-hover-decoration: none;

// Components
$btn-bg: $primary;
$pagination-active-bg: $primary;
$pagination-active-border-color: $primary;

/*-- scss:rules --*/

// CLS Prevention: Base layout stabilization
* {
  box-sizing: border-box;
}

// Content container stabilization
.content,
main {
  min-height: 60vh;
}

// Navigation stabilization
.navbar {
  min-height: 60px;
  background: transparent;
  contain: layout;

  // Navigation links container
  .navbar-nav {
    min-width: 200px;
  }

  // Title styling
  .navbar-title {
    color: $dark-gray;
    font-size: 0.85rem;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.05rem;

    &:hover {
      filter: brightness(50%);
      text-decoration: underline !important;
    }
  }

  // Navigation links
  .navbar-nav .nav-link {
    color: $dark-gray;
    letter-spacing: 0.05rem;
    border-bottom: 0 hidden;
    margin: 0 10px;
    padding: 2px 2px 4px 2px !important;

    &:hover {
      filter: brightness(50%);
      text-decoration: underline !important;
      padding: 2px 2px 0 2px !important;
    }
  }

  // Navbar tools
  .quarto-navbar-tools {
    margin-left: auto;
    order: 900;
    font-size: 1.2rem;
    margin-right: -0.5rem;

    // Icon colors
    i,
    .bi {
      color: #545555 !important;
      filter: none !important;
    }
  }

  // Toggler styling
  button.navbar-toggler {
    color: #545555 !important;
    filter: none !important;
  }

  // Hamburger icon
  .navbar-toggler-icon {
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='30' height='30' viewBox='0 0 30 30'%3e%3cpath stroke='rgba(84, 85, 85, 1)' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e") !important;
    filter: none !important;
  }
}

// Code block stabilization
div.sourceCode {
  background-color: $gray-light;
  border: 1px solid $gray-light;
  min-height: 2em;
  contain: layout;
}

pre,
.sourceCode {
  min-height: 2em;
  contain: layout;
}

// Prevent syntax highlighting shifts
code[class*="language-"],
pre[class*="language-"] {
  visibility: hidden;
}

code[class*="language-"].loaded,
pre[class*="language-"].loaded {
  visibility: visible;
}

// Typography with reserved space
.title {
  font-size: 2.5rem;
  font-weight: 500;
  line-height: 1.1;
  min-height: 2.75rem; // Reserve space
}

.subtitle {
  font-size: 1.2rem;
  min-height: 1.44rem; // Reserve space

  a {
    text-decoration: underline !important;

    &:hover {
      text-decoration: none !important;
    }
  }
}

// Link styles
.description a {
  text-decoration: underline !important;

  &:hover {
    text-decoration: none !important;
  }
}

// Home page social links
.about-links .about-link i {
  &:hover {
    filter: brightness(40%);
    text-decoration: none !important;
  }
}

// Button styles
.btn {
  &-secondary {
    color: $primary !important;
    background: transparent;
    border-radius: 5px;
  }

  &-primary {
    color: white !important;
    background-color: $primary !important;
    border-color: $primary !important;

    &:hover {
      background-color: $dark-gray !important;
      border-color: $dark-gray !important;
    }
  }
}

// Pagination
.page-link {
  color: $primary;

  &:hover {
    color: white !important;
    background-color: $primary !important;
    border-color: $primary !important;
  }
}

// Category styling - shared properties for reuse
%category-base {
  font-size: 0.7rem;
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 0.02rem;
  color: $dark-gray;
  border: 0.1px solid $border-color;
  padding: 5px;
  border-radius: 0.25rem;
}

// Categories with layout containment
.quarto-categories {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5em 0.4em;
  padding-bottom: 0.5em;
  margin-top: 0.75em;
  contain: layout;

  .quarto-category {
    @extend %category-base;
  }
}

// Listings
.listing-category {
  @extend %category-base;
}

// Stabilize list elements
ul,
ol {
  contain: layout;
}

div.quarto-post .thumbnail img {
  margin-top: -1em;
}

// Cards with stabilization
.card {
  background: transparent;
  border: none;
  border-radius: 4px;
  box-shadow: 1px 1px 10px rgba(0, 0, 0, 0.1);
  contain: layout;
}

.card-img {
  border-radius: 4px 4px 0 0;
}

// Footer links
.nav-footer .nav-link {
  &:hover {
    text-decoration: underline;
  }
}

// Images with CLS prevention
img {
  max-width: 100%;
  height: auto;
  display: block;
}

.figure-img {
  width: 100%;
  height: auto;
  display: block;
}

// Table stabilization
table {
  table-layout: fixed;
  width: 100%;
}

// Captions - consolidated styling with reserved space
.panel-caption,
.figure-caption,
.subfigure-caption,
.table-caption,
figcaption,
caption {
  color: $medium-gray;
  text-align: center;
  margin: 0.5em 0;
  min-height: 1.2em; // Reserve space
}

// Quarto callout blocks stabilization
.callout {
  min-height: 3em;
  contain: layout;
}

// Embed containers (for any third-party content)
.embed-container {
  position: relative;
  padding-bottom: 56.25%; // 16:9 aspect ratio
  height: 0;
  overflow: hidden;
}

.embed-container iframe {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

// Fixed positioning
.fixed-top,
.aa-DetachedOverlay {
  position: absolute;
}

// Responsive styles
@media screen and (max-width: 991.98px) {

  // Social media links
  .about-entity .about-links {
    flex-direction: row !important;
    justify-content: center !important;
  }

  // Navbar elements
  .navbar {
    &-title {
      justify-content: center !important;
      font-size: 0.85rem;
    }

    .quarto-navbar-tools {
      font-size: 1.2rem;
      text-align: left;
    }
  }

  // Footer layout
  .nav-footer {
    flex-direction: row;

    &-center {
      order: 1 !important;
      flex-basis: 100%;
      margin: 0 0 -1.2em 0;
    }

    &-right,
    &-left {
      flex-basis: 100%;
      text-align: center;
    }

    &-right {
      order: 2 !important;
    }

    &-left {
      order: 3 !important;
    }
  }
}
