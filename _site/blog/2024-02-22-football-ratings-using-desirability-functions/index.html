<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.545">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Paul Johnson">
<meta name="dcterms.date" content="2024-02-22">

<title>Developing Offensive Ratings Using Desirability Functions | Paul Johnson</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<link href="../../assets/img/favicon/favicon.ico" rel="icon">
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="../../site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="../../site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="../../site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style>

      .quarto-title-block .quarto-title-banner {
        background: #FFFFFF;
      }
</style>
<!-- umami cloud -->
<script defer="" data-domains="paulrjohnson.net" src="https://us.umami.is/script.js" data-website-id="9cba7ef5-1284-45cf-afe4-b2442b377c45"></script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<meta name="twitter:title" content="Developing Offensive Ratings Using Desirability Functions | Paul Johnson">
<meta name="twitter:description" content="Ranking football players using {desirability2} and multivariate optimisation">
<meta name="twitter:image" content="https://paulrjohnson.net/blog/2024-02-22-football-ratings-using-desirability-functions/math.webp">
<meta name="twitter:image:alt" content="A blackboard with a many diagrams and mathematical operations drawn on it">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../assets/img/favicon/favicon.ico" alt="Purple Octopus" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">P(Johnson) &gt; 0.05</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../blog/index.html"> 
<span class="menu-text">Blog</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../projects/index.html"> 
<span class="menu-text">Projects</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../consultancy/index.html"> 
<span class="menu-text">Consultancy</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../cv/index.html"> 
<span class="menu-text">Curriculum Vitae</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
    <a href="https://www.github.com/paulj1989/paulrjohnson.net" title="" class="quarto-navigation-tool px-1" aria-label="GitHub"><i class="bi bi-github"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns">
<div id="title-block-header-title" class="quarto-title page-columns page-full page-layout-full featured-image p-4" style="background-image: url(featured.png), url(featured.jpg), url(../featured.jpg);">
<h1 class="title">Developing Offensive Ratings Using Desirability Functions</h1>
<p class="subtitle lead">Ranking football players using <code>{desirability2}</code> and multivariate optimisation</p>
    <div class="quarto-categories">
        <div class="quarto-category">Desirability Functions</div>
        <div class="quarto-category">Optimisation</div>
        <div class="quarto-category">Football Analytics</div>
        <div class="quarto-category">Data Science</div>
        <div class="quarto-category">R</div>
      </div>
  </div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Paul Johnson </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">February 22, 2024</p>
    </div>
  </div>
  
    
  </div>
  



</header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of Contents</h2>
   
  <ul>
  <li><a href="#desirability-functions" id="toc-desirability-functions" class="nav-link active" data-scroll-target="#desirability-functions">Desirability Functions</a>
  <ul class="collapse">
  <li><a href="#how-desirability-works" id="toc-how-desirability-works" class="nav-link" data-scroll-target="#how-desirability-works">How Desirability Works</a></li>
  <li><a href="#the-desirability2-package" id="toc-the-desirability2-package" class="nav-link" data-scroll-target="#the-desirability2-package">The <code>{desirability2}</code> Package</a></li>
  </ul></li>
  <li><a href="#a-rating-system-for-offensive-football-players" id="toc-a-rating-system-for-offensive-football-players" class="nav-link" data-scroll-target="#a-rating-system-for-offensive-football-players">A Rating System for Offensive Football Players</a>
  <ul class="collapse">
  <li><a href="#goal-threat" id="toc-goal-threat" class="nav-link" data-scroll-target="#goal-threat">Goal Threat</a>
  <ul class="collapse">
  <li><a href="#sec-scaling" id="toc-sec-scaling" class="nav-link" data-scroll-target="#sec-scaling">Scaling Desirability Functions</a></li>
  </ul></li>
  <li><a href="#chance-creation" id="toc-chance-creation" class="nav-link" data-scroll-target="#chance-creation">Chance Creation</a></li>
  <li><a href="#ball-progression" id="toc-ball-progression" class="nav-link" data-scroll-target="#ball-progression">Ball Progression</a></li>
  <li><a href="#overall-offensive-ratings" id="toc-overall-offensive-ratings" class="nav-link" data-scroll-target="#overall-offensive-ratings">Overall Offensive Ratings</a></li>
  </ul></li>
  <li><a href="#limitations" id="toc-limitations" class="nav-link" data-scroll-target="#limitations">Limitations</a></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion">Conclusion</a></li>
  
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">

<!-- source: https://github.com/gadenbuie/garrickadenbuie-com/blob/main/_partials/title-block-link-buttons/title-block.html -->
<!-- 
<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title"> 
-->
<!-- <header id="title-block-header" class="quarto-title-block default page-columns"> -->
<!-- <div class="quarto-title page-columns page-full featured-image p-4" style="background-image: url(featured.png), url(featured.jpg), url(../featured.jpg);"> -->



<div class="cell">
<details class="code-fold">
<summary>Setup Code (Click to Expand)</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># import packages</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">suppressPackageStartupMessages</span>({</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">library</span>(dplyr)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">library</span>(gt)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">library</span>(showtext)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">library</span>(ggplot2)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">library</span>(worldfootballR)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">library</span>(desirability2)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="co"># setup fonts</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>sysfonts<span class="sc">::</span><span class="fu">font_add_google</span>(<span class="st">"Poppins"</span>)</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>sysfonts<span class="sc">::</span><span class="fu">font_add_google</span>(<span class="st">"Lora"</span>)</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>showtext<span class="sc">::</span><span class="fu">showtext_auto</span>()</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="co"># set plot theme</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="co"># inspired by https://github.com/z3tt/TidyTuesday/blob/main/R/2020_31_PalmerPenguins.Rmd</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="fu">theme_set</span>(<span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">20</span>, <span class="at">base_family =</span> <span class="st">"Poppins"</span>)) <span class="sc">+</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_update</span>(</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.major =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">"grey90"</span>, <span class="at">linewidth =</span> .<span class="dv">4</span>),</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>      <span class="at">color =</span> <span class="st">"grey30"</span>, <span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">5</span>), <span class="at">size =</span> <span class="fu">rel</span>(<span class="fl">1.05</span>)</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.y =</span> <span class="fu">element_text</span>(</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>      <span class="at">color =</span> <span class="st">"grey30"</span>, <span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">r =</span> <span class="dv">5</span>), <span class="at">size =</span> <span class="fu">rel</span>(<span class="fl">1.05</span>)</span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">"grey50"</span>, <span class="at">size =</span> <span class="fu">rel</span>(<span class="dv">1</span>)),</span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.ticks =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">"grey90"</span>, <span class="at">linewidth =</span> .<span class="dv">4</span>),</span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.ticks.length =</span> <span class="fu">unit</span>(.<span class="dv">2</span>, <span class="st">"lines"</span>),</span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"top"</span>,</span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.title =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="fu">rel</span>(<span class="dv">1</span>)),</span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(</span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a>      <span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">family =</span> <span class="st">"Lora"</span>,</span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a>      <span class="at">size =</span> <span class="fu">rel</span>(<span class="fl">1.5</span>), <span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">5</span>, <span class="at">b =</span> <span class="dv">5</span>)</span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(</span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a>      <span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">color =</span> <span class="st">"grey30"</span>, <span class="at">family =</span> <span class="st">"Lora"</span>,</span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a>      <span class="at">lineheight =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="fu">rel</span>(<span class="fl">1.1</span>), </span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a>      <span class="at">margin =</span> <span class="fu">margin</span>(<span class="dv">5</span>, <span class="dv">0</span>, <span class="dv">5</span>, <span class="dv">0</span>)</span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title.position =</span> <span class="st">"plot"</span>,</span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.caption =</span> <span class="fu">element_text</span>(</span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a>      <span class="at">color =</span> <span class="st">"grey50"</span>, <span class="at">size =</span> <span class="fu">rel</span>(<span class="fl">0.8</span>), <span class="at">hjust =</span> <span class="dv">1</span>,</span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a>      <span class="at">margin =</span> <span class="fu">margin</span>(<span class="dv">10</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>)</span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.caption.position =</span> <span class="st">"plot"</span>,</span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.margin =</span> <span class="fu">margin</span>(<span class="fu">rep</span>(<span class="dv">10</span>, <span class="dv">4</span>))</span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a><span class="co"># function for creating tables</span></span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a>format_table <span class="ot">&lt;-</span></span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a>  <span class="cf">function</span>(data, cols) {</span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true" tabindex="-1"></a>    data <span class="sc">|&gt;</span></span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true" tabindex="-1"></a>      <span class="fu">gt</span>() <span class="sc">|&gt;</span></span>
<span id="cb1-57"><a href="#cb1-57" aria-hidden="true" tabindex="-1"></a>      <span class="fu">fmt_number</span>(<span class="at">columns =</span> cols, <span class="at">decimals =</span> <span class="dv">2</span>) <span class="sc">|&gt;</span></span>
<span id="cb1-58"><a href="#cb1-58" aria-hidden="true" tabindex="-1"></a>      <span class="fu">tab_spanner</span>(</span>
<span id="cb1-59"><a href="#cb1-59" aria-hidden="true" tabindex="-1"></a>        <span class="at">label =</span> <span class="st">"Desirability Scores"</span>,</span>
<span id="cb1-60"><a href="#cb1-60" aria-hidden="true" tabindex="-1"></a>        <span class="at">columns =</span> cols</span>
<span id="cb1-61"><a href="#cb1-61" aria-hidden="true" tabindex="-1"></a>      ) <span class="sc">|&gt;</span></span>
<span id="cb1-62"><a href="#cb1-62" aria-hidden="true" tabindex="-1"></a>      <span class="fu">cols_align</span>(</span>
<span id="cb1-63"><a href="#cb1-63" aria-hidden="true" tabindex="-1"></a>        <span class="at">align =</span> <span class="st">"center"</span>,</span>
<span id="cb1-64"><a href="#cb1-64" aria-hidden="true" tabindex="-1"></a>        <span class="at">columns =</span> cols</span>
<span id="cb1-65"><a href="#cb1-65" aria-hidden="true" tabindex="-1"></a>      ) <span class="sc">|&gt;</span></span>
<span id="cb1-66"><a href="#cb1-66" aria-hidden="true" tabindex="-1"></a>      <span class="fu">tab_source_note</span>(<span class="at">source_note =</span> <span class="st">"Source: FB Ref Via {worldfootballR}"</span>) <span class="sc">|&gt;</span></span>
<span id="cb1-67"><a href="#cb1-67" aria-hidden="true" tabindex="-1"></a>      <span class="fu">tab_options</span>(</span>
<span id="cb1-68"><a href="#cb1-68" aria-hidden="true" tabindex="-1"></a>        <span class="at">table.width =</span> <span class="fu">pct</span>(<span class="dv">100</span>),</span>
<span id="cb1-69"><a href="#cb1-69" aria-hidden="true" tabindex="-1"></a>        <span class="at">table.font.names =</span> <span class="st">"Poppins"</span></span>
<span id="cb1-70"><a href="#cb1-70" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb1-71"><a href="#cb1-71" aria-hidden="true" tabindex="-1"></a>  }</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Building rating systems for complex, multidimensional contexts is difficult, and the results are often underwhelming. There are many examples of this in sports, where rating systems are common. While many sports have metrics that accurately describe team and player performance in specific contexts, ratings that summarise performance are more limited. Football has expected goals (xG). xG is a relatively accurate proxy for team performance because it describes every team’s primary objective - score more goals than the opponent. However, players help their team achieve this objective in many ways that xG does not capture.</p>
<p>An accurate player rating system would help address this. Performance has multiple components, so rating players is a balancing act. While goals may be the most important part of the game, a player who scored two goals has not necessarily played better than their teammate who contributed a goal and an assist, because player performance is a combination of factors. Player ratings are a multivariate optimisation problem.</p>
<p>In this blog post, I will use a simple but often overlooked method for multivariate optimisation - desirability functions - to develop a rating system for offensive players in football, using data from the big five leagues in the 2022/23 season. The ratings will attempt to identify the best players in Europe in the 2022/23 season because match-level ratings seem less fun (and more difficult).</p>
<p>As someone prone to seeing rabbit holes as a challenge, I have spent far too much time debating what factors should go into player ratings and how to maximise the performance of a rating system, but the focus of this post is on the demonstration of desirability functions. The result is a rating system with plenty of room for improvement, but hopefully, in the process, this post will serve as a brief introduction to desirability functions.</p>
<section id="desirability-functions" class="level1">
<h1>Desirability Functions</h1>
<p>Desirability functions are a method for simultaneously optimising multiple variables <span class="citation" data-cites="kuhn2023 harrington1965 derringer1980">(<a href="#ref-kuhn2023" role="doc-biblioref">Kuhn 2023</a>; <a href="#ref-harrington1965" role="doc-biblioref">Harrington 1965</a>; <a href="#ref-derringer1980" role="doc-biblioref">Derringer and Suich 1980</a>)</span>. If you have multiple variables, finding the optimal value of one may take you further away from the optimal value of the others. It is necessary to find an optimal combination of values instead, and desirability functions are a simple solution to this problem <span class="citation" data-cites="kuhn2023">(<a href="#ref-kuhn2023" role="doc-biblioref">Kuhn 2023</a>)</span>.</p>
<p>Desirability functions are common in fields like genomics, and they are sometimes used in machine learning to optimise across multiple evaluation metrics or model parameters. The <a href="https://desirability2.tidymodels.org/"><code>{desirability2}</code></a> package is a part of the <a href="https://www.tidymodels.org/">tidymodels</a> machine learning framework, but it is not limited to optimising evaluation metrics. While there are other ways of approaching this type of task, I like desirability functions for their relative simplicity. They are quick and easy, and they’re pretty simple to explain to non-technical audiences.</p>
<section id="how-desirability-works" class="level2">
<h2 class="anchored" data-anchor-id="how-desirability-works">How Desirability Works</h2>
<p>Desirability functions optimise across multiple variables by mapping each variable onto a standard scale from one (maximally desirable) to zero (unacceptable) using a transformation function<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>, before calculating the weighted combination of these individual scores using the arithmetic or geometric mean<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> and optimising this overall desirability score <span class="citation" data-cites="kuhn2016 kuhn2019 kuhn2023">(<a href="#ref-kuhn2016" role="doc-biblioref">Kuhn 2016</a>, <a href="#ref-kuhn2023" role="doc-biblioref">2023</a>; <a href="#ref-kuhn2019" role="doc-biblioref">Kuhn and Johnson 2019</a>)</span>.</p>
<p>Mapping each variable to a standard scale makes a direct comparison between variables easier. The transformation function depends on what desirability looks like for each variable. If higher values are more desirable, maximisation would be appropriate, or minimisation when lower values are more desirable. Other transformations are possible, such as a particular target value or a box function that specifies a desirable interval, and there are also mechanisms for making desirability easier or harder to achieve, using scaling features. Having transformed each variable onto a scale where values approaching one are more desirable, the observation that achieves the highest average value of all individual desirability scores is the observation that is the closest to being maximally desirable.</p>
</section>
<section id="the-desirability2-package" class="level2">
<h2 class="anchored" data-anchor-id="the-desirability2-package">The <code>{desirability2}</code> Package</h2>
<p>There are two main groups of functions in the <a href="https://desirability2.tidymodels.org/reference/index.html"><code>{desirability2}</code></a> package - the <a href="https://desirability2.tidymodels.org/reference/inline_desirability.html">transformation functions</a> and the <a href="https://desirability2.tidymodels.org/reference/d_overall.html">overall desirability function</a>.</p>
<p>While the most commonly used transformation functions will be <code>d_max()</code> and <code>d_min()</code>, there are several other transformations (<code>d_target()</code>, <code>d_box()</code>, and <code>d_category()</code>). Where none of these functions are sufficient, <code>d_custom()</code> offers functionality for specifying a custom transformation. Finally, <code>d_overall()</code> calculates the overall desirability score.</p>
<p>All {desirability2} functions can be a part of a typical <a href="https://www.tidyverse.org/">tidyverse</a> pipeline.</p>
</section>
</section>
<section id="a-rating-system-for-offensive-football-players" class="level1">
<h1>A Rating System for Offensive Football Players</h1>
<div class="cell">
<details class="code-fold">
<summary>Data Code (Click to Expand)</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># get raw data</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>standard_stats <span class="ot">&lt;-</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fb_big5_advanced_season_stats</span>(</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">season_end_year =</span> <span class="dv">2023</span>,</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">stat_type =</span> <span class="st">"standard"</span>,</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">team_or_player =</span> <span class="st">"player"</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>  janitor<span class="sc">::</span><span class="fu">clean_names</span>(</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">replace =</span> <span class="fu">c</span>(</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>      <span class="st">"_Playing"</span> <span class="ot">=</span> <span class="st">""</span>,</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>      <span class="st">"_Expected"</span> <span class="ot">=</span> <span class="st">""</span>,</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>      <span class="st">"_Progression"</span> <span class="ot">=</span> <span class="st">""</span>,</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>      <span class="st">"PK"</span> <span class="ot">=</span> <span class="st">"pk"</span>,</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>      <span class="st">"PKatt"</span> <span class="ot">=</span> <span class="st">"pk_att"</span>,</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>      <span class="st">"xG"</span> <span class="ot">=</span> <span class="st">"xg"</span>,</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>      <span class="st">"xAG"</span> <span class="ot">=</span> <span class="st">"xag"</span>,</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>      <span class="st">"_Per_90"</span> <span class="ot">=</span> <span class="st">"90"</span>,</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>      <span class="st">"_Per"</span> <span class="ot">=</span> <span class="st">"90"</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(</span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>      <span class="fu">starts_with</span>(<span class="st">"prg"</span>), <span class="sc">~</span> <span class="fu">round</span>(.x<span class="sc">/</span>mins90, <span class="dv">2</span>), </span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>      <span class="at">.names =</span> <span class="st">"{.col}90"</span></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">position =</span> stringr<span class="sc">::</span><span class="fu">str_split_i</span>(pos, <span class="at">pattern =</span> <span class="st">","</span>, <span class="at">i =</span> <span class="dv">1</span>)</span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span> </span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(player, position, squad, comp, <span class="fu">ends_with</span>(<span class="st">"90"</span>))</span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>shooting_stats <span class="ot">&lt;-</span></span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fb_big5_advanced_season_stats</span>(</span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">season_end_year =</span> <span class="dv">2023</span>,</span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">stat_type =</span> <span class="st">"shooting"</span>,</span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">team_or_player =</span> <span class="st">"player"</span></span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span> </span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a>  janitor<span class="sc">::</span><span class="fu">clean_names</span>(</span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">replace =</span> <span class="fu">c</span>(</span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a>      <span class="st">"_Standard"</span> <span class="ot">=</span> <span class="st">""</span>,</span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a>      <span class="st">"_per_90"</span> <span class="ot">=</span> <span class="st">"90"</span></span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span></span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(player, squad, sh90)</span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a>passing_stats <span class="ot">&lt;-</span></span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fb_big5_advanced_season_stats</span>(</span>
<span id="cb2-46"><a href="#cb2-46" aria-hidden="true" tabindex="-1"></a>    <span class="at">season_end_year =</span> <span class="dv">2023</span>,</span>
<span id="cb2-47"><a href="#cb2-47" aria-hidden="true" tabindex="-1"></a>    <span class="at">stat_type =</span> <span class="st">"passing"</span>,</span>
<span id="cb2-48"><a href="#cb2-48" aria-hidden="true" tabindex="-1"></a>    <span class="at">team_or_player =</span> <span class="st">"player"</span></span>
<span id="cb2-49"><a href="#cb2-49" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb2-50"><a href="#cb2-50" aria-hidden="true" tabindex="-1"></a>  janitor<span class="sc">::</span><span class="fu">clean_names</span>(</span>
<span id="cb2-51"><a href="#cb2-51" aria-hidden="true" tabindex="-1"></a>    <span class="at">replace =</span> <span class="fu">c</span>(</span>
<span id="cb2-52"><a href="#cb2-52" aria-hidden="true" tabindex="-1"></a>      <span class="st">"_Expected"</span> <span class="ot">=</span> <span class="st">""</span>,</span>
<span id="cb2-53"><a href="#cb2-53" aria-hidden="true" tabindex="-1"></a>      <span class="st">"xA"</span> <span class="ot">=</span> <span class="st">"xa"</span></span>
<span id="cb2-54"><a href="#cb2-54" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb2-55"><a href="#cb2-55" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span></span>
<span id="cb2-56"><a href="#cb2-56" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">xa90 =</span> <span class="fu">round</span>(xa<span class="sc">/</span>mins_per_90, <span class="dv">2</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb2-57"><a href="#cb2-57" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(player, squad, xa90)</span>
<span id="cb2-58"><a href="#cb2-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-59"><a href="#cb2-59" aria-hidden="true" tabindex="-1"></a>gca_stats <span class="ot">&lt;-</span></span>
<span id="cb2-60"><a href="#cb2-60" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fb_big5_advanced_season_stats</span>(</span>
<span id="cb2-61"><a href="#cb2-61" aria-hidden="true" tabindex="-1"></a>    <span class="at">season_end_year =</span> <span class="dv">2023</span>, </span>
<span id="cb2-62"><a href="#cb2-62" aria-hidden="true" tabindex="-1"></a>    <span class="at">stat_type =</span> <span class="st">"gca"</span>, </span>
<span id="cb2-63"><a href="#cb2-63" aria-hidden="true" tabindex="-1"></a>    <span class="at">team_or_player =</span> <span class="st">"player"</span></span>
<span id="cb2-64"><a href="#cb2-64" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb2-65"><a href="#cb2-65" aria-hidden="true" tabindex="-1"></a>  janitor<span class="sc">::</span><span class="fu">clean_names</span>(<span class="at">replace =</span> <span class="fu">c</span>(<span class="st">"_SCA"</span> <span class="ot">=</span> <span class="st">""</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb2-66"><a href="#cb2-66" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(player, squad, sca90)</span>
<span id="cb2-67"><a href="#cb2-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-68"><a href="#cb2-68" aria-hidden="true" tabindex="-1"></a>possession_stats <span class="ot">&lt;-</span></span>
<span id="cb2-69"><a href="#cb2-69" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fb_big5_advanced_season_stats</span>(</span>
<span id="cb2-70"><a href="#cb2-70" aria-hidden="true" tabindex="-1"></a>    <span class="at">season_end_year =</span> <span class="dv">2023</span>,</span>
<span id="cb2-71"><a href="#cb2-71" aria-hidden="true" tabindex="-1"></a>    <span class="at">stat_type =</span> <span class="st">"possession"</span>,</span>
<span id="cb2-72"><a href="#cb2-72" aria-hidden="true" tabindex="-1"></a>    <span class="at">team_or_player =</span> <span class="st">"player"</span></span>
<span id="cb2-73"><a href="#cb2-73" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb2-74"><a href="#cb2-74" aria-hidden="true" tabindex="-1"></a>  janitor<span class="sc">::</span><span class="fu">clean_names</span>() <span class="sc">|&gt;</span> </span>
<span id="cb2-75"><a href="#cb2-75" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pen_touches90 =</span> <span class="fu">round</span>(att_pen_touches<span class="sc">/</span><span class="dv">90</span>, <span class="dv">2</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb2-76"><a href="#cb2-76" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(player, squad, pen_touches90)</span>
<span id="cb2-77"><a href="#cb2-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-78"><a href="#cb2-78" aria-hidden="true" tabindex="-1"></a><span class="co"># join full dataset</span></span>
<span id="cb2-79"><a href="#cb2-79" aria-hidden="true" tabindex="-1"></a>big_five_stats <span class="ot">&lt;-</span></span>
<span id="cb2-80"><a href="#cb2-80" aria-hidden="true" tabindex="-1"></a>  standard_stats <span class="sc">|&gt;</span> </span>
<span id="cb2-81"><a href="#cb2-81" aria-hidden="true" tabindex="-1"></a>  <span class="fu">full_join</span>(shooting_stats) <span class="sc">|&gt;</span> </span>
<span id="cb2-82"><a href="#cb2-82" aria-hidden="true" tabindex="-1"></a>  <span class="fu">full_join</span>(passing_stats) <span class="sc">|&gt;</span> </span>
<span id="cb2-83"><a href="#cb2-83" aria-hidden="true" tabindex="-1"></a>  <span class="fu">full_join</span>(gca_stats) <span class="sc">|&gt;</span> </span>
<span id="cb2-84"><a href="#cb2-84" aria-hidden="true" tabindex="-1"></a>  <span class="fu">full_join</span>(possession_stats) <span class="sc">|&gt;</span> </span>
<span id="cb2-85"><a href="#cb2-85" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tibble</span>() <span class="sc">|&gt;</span> </span>
<span id="cb2-86"><a href="#cb2-86" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">drop_na</span>() <span class="sc">|&gt;</span> </span>
<span id="cb2-87"><a href="#cb2-87" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(mins90 <span class="sc">&gt;</span> <span class="dv">15</span> <span class="sc">&amp;</span> position <span class="sc">!=</span> <span class="st">"GK"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb2-88"><a href="#cb2-88" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb2-89"><a href="#cb2-89" aria-hidden="true" tabindex="-1"></a>    <span class="at">team =</span> squad, </span>
<span id="cb2-90"><a href="#cb2-90" aria-hidden="true" tabindex="-1"></a>    <span class="at">league =</span> comp,</span>
<span id="cb2-91"><a href="#cb2-91" aria-hidden="true" tabindex="-1"></a>    <span class="at">npg90 =</span> g_minus_pk90</span>
<span id="cb2-92"><a href="#cb2-92" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Using the excellent <a href="https://jaseziv.github.io/worldfootballR"><code>{worldfootballR}</code></a> package, I have pulled together player-level <a href="https://fbref.com/">FB Ref</a> data for the 2022/23 season across the big five leagues, for a variety of different offensive measures. The data represents multiple elements of team offense, and in order to capture this, I have split the data into three components - goal threat, chance creation, and ball progression.</p>
<p>Goal threat is made up of four variables, non-penalty goals (npG), non-penalty expected goals (npxG), shots, and touches in the penalty area, while chance creation is comprised of just three - assists, expected assists (xA), and shot-creating actions (SCA). Finally, ball progression is also made up of three variables, progressive passes, carries, and receptions. Every variable in each desirability function is calculated per 90 minutes, to standardise variables by a player’s playing time.</p>
<p>The variables that make up each offensive component, and even the components themselves, are far from exhaustive. There are lots of different variables that could (and probably should) be included, and other aspects of a football team’s offense, like the defensive contributions made by offensive players higher up the pitch, would lead to a more precise rating system. However, the variables that make up the desirability functions here should do a reasonably effective job of capturing all three offensive components without overcomplicating things for the purpose of a blog post.</p>
<section id="goal-threat" class="level2">
<h2 class="anchored" data-anchor-id="goal-threat">Goal Threat</h2>
<p>Perhaps it is stating the obvious to even the most “I’m only here for the stats” folks reading this blog post, but scoring goals is a very important part of football. Goals are good. Teams love them. Everyone loves players that do them. So it makes sense to start the rating system with the goal threat component.</p>
<p>The four variables that make up the goal threat desirability function are npG, npxG, shots, and touches in the opponent’s penalty area. All of these variables have relatively clear predictive value when trying to predict goals, though you could also include other variables like average shot distance if you wanted to be more precise. Each variable also has a positive association with performance, so the desirability functions are all seeking to maximise their values.</p>
<p>The two most predictive variables are, perhaps unsurprisingly, npG and npxG, while shots and touches in the opponent’s penalty area are more supplementary. As a result, goals and expected goals have been rescaled to give them greater weight in the overall desirability score, while shots and touches have been rescaled to downweight their value (discussed in greater detail in <a href="#sec-scaling" class="quarto-xref">Section&nbsp;2.1.1</a>). The code for computing the goal threat desirability function is below (<code>d_max()</code> is the function doing all the work) and <a href="#tbl-goal-threat" class="quarto-xref">Table&nbsp;1</a> shows the top ten players in terms of goal threat.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>goal_threat <span class="ot">&lt;-</span> </span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  big_five_stats <span class="sc">|&gt;</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># maximise npg90 &amp; npxg90 with higher scale</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">.cols =</span> <span class="fu">c</span>(npg90, npxg90),</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>      <span class="sc">~</span> <span class="fu">d_max</span>(.x, <span class="at">use_data =</span> <span class="cn">TRUE</span>, <span class="at">scale =</span> <span class="dv">2</span>),</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">.names =</span> <span class="st">"d_{.col}"</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># maximise shots90 &amp; pen_touches90 with lower scale</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>      <span class="at">.cols =</span> <span class="fu">c</span>(sh90, pen_touches90),</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>      <span class="sc">~</span> <span class="fu">d_max</span>(.x, <span class="at">use_data =</span> <span class="cn">TRUE</span>, <span class="at">scale =</span> <span class="fl">0.5</span>),</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>      <span class="at">.names =</span> <span class="st">"d_{.col}"</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># overall desirability score for goal scoring</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>    <span class="co"># tolerance set to 0.1 so that lowest values are not 0</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">d_goals =</span> <span class="fu">d_overall</span>(<span class="fu">across</span>(<span class="fu">starts_with</span>(<span class="st">"d_"</span>)), <span class="at">tolerance =</span> <span class="fl">0.1</span>)</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(player, position, team, league, <span class="fu">starts_with</span>(<span class="st">"d_"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(d_goals)) <span class="sc">|&gt;</span> </span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename_at</span>(<span class="fu">vars</span>(player<span class="sc">:</span>league), snakecase<span class="sc">::</span>to_title_case) <span class="sc">|&gt;</span> </span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Non-Penalty Goals"</span> <span class="ot">=</span> d_npg90,</span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Non-Penalty xG"</span> <span class="ot">=</span> d_npxg90,</span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Shots"</span> <span class="ot">=</span> d_sh90,</span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Penalty Area Touches"</span> <span class="ot">=</span> d_pen_touches90,</span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Overall"</span> <span class="ot">=</span> d_goals</span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Table Code (Click to Expand)</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>goal_threat <span class="sc">|&gt;</span> </span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>) <span class="sc">|&gt;</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">format_table</span>(<span class="at">cols =</span> <span class="dv">5</span><span class="sc">:</span><span class="dv">9</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="tbl-goal-threat" class="cell quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-goal-threat-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;1: Goal Threat Ratings
</figcaption>
<div aria-describedby="tbl-goal-threat-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<div id="wbwajtijjg" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#wbwajtijjg table {
  font-family: Poppins;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#wbwajtijjg thead, #wbwajtijjg tbody, #wbwajtijjg tfoot, #wbwajtijjg tr, #wbwajtijjg td, #wbwajtijjg th {
  border-style: none;
}

#wbwajtijjg p {
  margin: 0;
  padding: 0;
}

#wbwajtijjg .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: 100%;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#wbwajtijjg .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#wbwajtijjg .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#wbwajtijjg .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#wbwajtijjg .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#wbwajtijjg .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#wbwajtijjg .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#wbwajtijjg .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#wbwajtijjg .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#wbwajtijjg .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#wbwajtijjg .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#wbwajtijjg .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#wbwajtijjg .gt_spanner_row {
  border-bottom-style: hidden;
}

#wbwajtijjg .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#wbwajtijjg .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#wbwajtijjg .gt_from_md > :first-child {
  margin-top: 0;
}

#wbwajtijjg .gt_from_md > :last-child {
  margin-bottom: 0;
}

#wbwajtijjg .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#wbwajtijjg .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#wbwajtijjg .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#wbwajtijjg .gt_row_group_first td {
  border-top-width: 2px;
}

#wbwajtijjg .gt_row_group_first th {
  border-top-width: 2px;
}

#wbwajtijjg .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#wbwajtijjg .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#wbwajtijjg .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#wbwajtijjg .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#wbwajtijjg .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#wbwajtijjg .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#wbwajtijjg .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#wbwajtijjg .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#wbwajtijjg .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#wbwajtijjg .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#wbwajtijjg .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#wbwajtijjg .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#wbwajtijjg .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#wbwajtijjg .gt_left {
  text-align: left;
}

#wbwajtijjg .gt_center {
  text-align: center;
}

#wbwajtijjg .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#wbwajtijjg .gt_font_normal {
  font-weight: normal;
}

#wbwajtijjg .gt_font_bold {
  font-weight: bold;
}

#wbwajtijjg .gt_font_italic {
  font-style: italic;
}

#wbwajtijjg .gt_super {
  font-size: 65%;
}

#wbwajtijjg .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#wbwajtijjg .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#wbwajtijjg .gt_indent_1 {
  text-indent: 5px;
}

#wbwajtijjg .gt_indent_2 {
  text-indent: 10px;
}

#wbwajtijjg .gt_indent_3 {
  text-indent: 15px;
}

#wbwajtijjg .gt_indent_4 {
  text-indent: 20px;
}

#wbwajtijjg .gt_indent_5 {
  text-indent: 25px;
}
</style>

<table class="gt_table do-not-create-environment cell table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_col_headings gt_spanner_row">
<th rowspan="2" id="Player" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Player</th>
<th rowspan="2" id="Position" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Position</th>
<th rowspan="2" id="Team" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Team</th>
<th rowspan="2" id="League" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">League</th>
<th colspan="5" id="Desirability Scores" class="gt_center gt_columns_top_border gt_column_spanner_outer" data-quarto-table-cell-role="th" scope="colgroup"><span class="gt_column_spanner">Desirability Scores</span></th>
</tr>
<tr class="odd gt_col_headings">
<th id="Non-Penalty Goals" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">Non-Penalty Goals</th>
<th id="Non-Penalty xG" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">Non-Penalty xG</th>
<th id="Shots" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">Shots</th>
<th id="Penalty Area Touches" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">Penalty Area Touches</th>
<th id="Overall" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">Overall</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="Player">Erling Haaland</td>
<td class="gt_row gt_left" headers="Position">FW</td>
<td class="gt_row gt_left" headers="Team">Manchester City</td>
<td class="gt_row gt_left" headers="League">Premier League</td>
<td class="gt_row gt_center" headers="Non-Penalty Goals">1.00</td>
<td class="gt_row gt_center" headers="Non-Penalty xG">1.00</td>
<td class="gt_row gt_center" headers="Shots">0.90</td>
<td class="gt_row gt_center" headers="Penalty Area Touches">0.85</td>
<td class="gt_row gt_center" headers="Overall">0.93</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Player">Kylian Mbappé</td>
<td class="gt_row gt_left" headers="Position">FW</td>
<td class="gt_row gt_left" headers="Team">Paris S-G</td>
<td class="gt_row gt_left" headers="League">Ligue 1</td>
<td class="gt_row gt_center" headers="Non-Penalty Goals">0.78</td>
<td class="gt_row gt_center" headers="Non-Penalty xG">0.90</td>
<td class="gt_row gt_center" headers="Shots">1.00</td>
<td class="gt_row gt_center" headers="Penalty Area Touches">1.00</td>
<td class="gt_row gt_center" headers="Overall">0.91</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Player">Victor Osimhen</td>
<td class="gt_row gt_left" headers="Position">FW</td>
<td class="gt_row gt_left" headers="Team">Napoli</td>
<td class="gt_row gt_left" headers="League">Serie A</td>
<td class="gt_row gt_center" headers="Non-Penalty Goals">0.80</td>
<td class="gt_row gt_center" headers="Non-Penalty xG">0.77</td>
<td class="gt_row gt_center" headers="Shots">1.00</td>
<td class="gt_row gt_center" headers="Penalty Area Touches">0.88</td>
<td class="gt_row gt_center" headers="Overall">0.86</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Player">Robert Lewandowski</td>
<td class="gt_row gt_left" headers="Position">FW</td>
<td class="gt_row gt_left" headers="Team">Barcelona</td>
<td class="gt_row gt_left" headers="League">La Liga</td>
<td class="gt_row gt_center" headers="Non-Penalty Goals">0.60</td>
<td class="gt_row gt_center" headers="Non-Penalty xG">0.97</td>
<td class="gt_row gt_center" headers="Shots">0.96</td>
<td class="gt_row gt_center" headers="Penalty Area Touches">0.83</td>
<td class="gt_row gt_center" headers="Overall">0.83</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Player">Callum Wilson</td>
<td class="gt_row gt_left" headers="Position">FW</td>
<td class="gt_row gt_left" headers="Team">Newcastle Utd</td>
<td class="gt_row gt_left" headers="League">Premier League</td>
<td class="gt_row gt_center" headers="Non-Penalty Goals">0.59</td>
<td class="gt_row gt_center" headers="Non-Penalty xG">0.92</td>
<td class="gt_row gt_center" headers="Shots">0.85</td>
<td class="gt_row gt_center" headers="Penalty Area Touches">0.64</td>
<td class="gt_row gt_center" headers="Overall">0.74</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Player">Loïs Openda</td>
<td class="gt_row gt_left" headers="Position">FW</td>
<td class="gt_row gt_left" headers="Team">Lens</td>
<td class="gt_row gt_left" headers="League">Ligue 1</td>
<td class="gt_row gt_center" headers="Non-Penalty Goals">0.59</td>
<td class="gt_row gt_center" headers="Non-Penalty xG">0.71</td>
<td class="gt_row gt_center" headers="Shots">0.89</td>
<td class="gt_row gt_center" headers="Penalty Area Touches">0.74</td>
<td class="gt_row gt_center" headers="Overall">0.72</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Player">Lautaro Martínez</td>
<td class="gt_row gt_left" headers="Position">FW</td>
<td class="gt_row gt_left" headers="Team">Inter</td>
<td class="gt_row gt_left" headers="League">Serie A</td>
<td class="gt_row gt_center" headers="Non-Penalty Goals">0.55</td>
<td class="gt_row gt_center" headers="Non-Penalty xG">0.60</td>
<td class="gt_row gt_center" headers="Shots">0.97</td>
<td class="gt_row gt_center" headers="Penalty Area Touches">0.75</td>
<td class="gt_row gt_center" headers="Overall">0.70</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Player">Karim Benzema</td>
<td class="gt_row gt_left" headers="Position">FW</td>
<td class="gt_row gt_left" headers="Team">Real Madrid</td>
<td class="gt_row gt_left" headers="League">La Liga</td>
<td class="gt_row gt_center" headers="Non-Penalty Goals">0.32</td>
<td class="gt_row gt_center" headers="Non-Penalty xG">0.77</td>
<td class="gt_row gt_center" headers="Shots">0.97</td>
<td class="gt_row gt_center" headers="Penalty Area Touches">0.76</td>
<td class="gt_row gt_center" headers="Overall">0.65</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Player">Alexandre Lacazette</td>
<td class="gt_row gt_left" headers="Position">FW</td>
<td class="gt_row gt_left" headers="Team">Lyon</td>
<td class="gt_row gt_left" headers="League">Ligue 1</td>
<td class="gt_row gt_center" headers="Non-Penalty Goals">0.48</td>
<td class="gt_row gt_center" headers="Non-Penalty xG">0.54</td>
<td class="gt_row gt_center" headers="Shots">0.84</td>
<td class="gt_row gt_center" headers="Penalty Area Touches">0.83</td>
<td class="gt_row gt_center" headers="Overall">0.65</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Player">Darwin Núñez</td>
<td class="gt_row gt_left" headers="Position">FW</td>
<td class="gt_row gt_left" headers="Team">Liverpool</td>
<td class="gt_row gt_left" headers="League">Premier League</td>
<td class="gt_row gt_center" headers="Non-Penalty Goals">0.26</td>
<td class="gt_row gt_center" headers="Non-Penalty xG">0.73</td>
<td class="gt_row gt_center" headers="Shots">0.98</td>
<td class="gt_row gt_center" headers="Penalty Area Touches">0.71</td>
<td class="gt_row gt_center" headers="Overall">0.60</td>
</tr>
</tbody><tfoot class="gt_sourcenotes">
<tr class="even">
<td colspan="9" class="gt_sourcenote">Source: FB Ref Via {worldfootballR}</td>
</tr>
</tfoot>

</table>

</div>
</div>
</div>
</figure>
</div>
</div>
<p>Erling Haaland, Kylian Mbappé, and Victor Osimhen leading the way in <a href="#tbl-goal-threat" class="quarto-xref">Table&nbsp;1</a> definitely inspires some confidence in this approach! Bar a few exceptions, like Alexandre Lacazette being one of the ten greatest goal threats in Europe at his big old age, the top ten feels pretty reasonable. The player that stands out the most, in part due to how high he is on the list, is Callum Wilson. However, looking back at his numbers last season, it’s more that he had a freak season than that the goal threat desirability score is doing something wonky. I don’t believe Callum Wilson poses the fifth greatest goal threat in the big five leagues, but it’s hard to argue with him being ranked fifth for his production last season.</p>
<p>I was also a little surprised not to see Harry Kane making the top ten, and it turns out he is in 15th. This appears to be because his xG was lower than the players ahead of him, despite him scoring plenty of goals last season. I think Kane’s lower rating raises questions about the decision to weight goals and expected goals equally. A more detailed rating system would need to make a decision about whether the goal is to describe a player’s past performance or identify the best players, which is inherently about predicting future performance. If it is the former, goals should probably be weighted higher, but if it is the latter, then expected goals should probably be favoured.</p>
<section id="sec-scaling" class="level3">
<h3 class="anchored" data-anchor-id="sec-scaling">Scaling Desirability Functions</h3>
<p>Each individual desirability function can be easily adjusted using the scaling feature, <span class="math inline">\(s\)</span>, which can be increased in order to make maximal desirability harder to reach, and decreased to make it easier. The default value is 1 because <span class="math inline">\(s\)</span> is an exponent and a 1 effectively cancels this out. We’re having fun.</p>
<p>In the goal threat desirability function, goals and expected goals have <span class="math inline">\(s = 2\)</span>, while for shots and touches in the opponent’s penalty area <span class="math inline">\(s = 0.5\)</span>. This captures the fact that npG and npxG are very direct measures of goal threat (they are literally the actual goals and the probability of scoring actual goals!), while shots and touches are a lot less direct. I suspect we’d be better served giving shots greater weight in the function than touches, but in the interest of trying my hardest not to get bogged down in the domain context and focus on the method, let’s just give them the same weight.</p>
<p>Given that <span class="math inline">\(s\)</span> is the exponent, the scaling feature transforms the desirability function in a non-linear manner. The plot below illustrates how scaling affects desirability.</p>
<div class="cell">
<details class="code-fold">
<summary>Plot Code (Click to Expand)</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>big_five_stats <span class="sc">|&gt;</span> </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># maximise shots90 without rescaling</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">no_scale =</span> <span class="fu">d_max</span>(sh90, <span class="at">use_data =</span> <span class="cn">TRUE</span>),</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># maximise shots90 with lower scale</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">easier   =</span> <span class="fu">d_max</span>(sh90, <span class="at">use_data =</span> <span class="cn">TRUE</span>, <span class="at">scale =</span> <span class="fl">0.2</span>),</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># maximise shots90 with higher scale</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">harder =</span> <span class="fu">d_max</span>(sh90, <span class="at">use_data =</span> <span class="cn">TRUE</span>, <span class="at">scale =</span> <span class="dv">5</span>)</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">pivot_longer</span>(</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> <span class="fu">c</span>(no_scale, easier, harder), </span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="st">"scaling"</span>, <span class="at">values_to =</span> <span class="st">"value"</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span> </span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">scaling =</span> <span class="fu">factor</span>(scaling, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"no_scale"</span>, <span class="st">"easier"</span>, <span class="st">"harder"</span>))) <span class="sc">|&gt;</span> </span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> sh90, <span class="at">y =</span> value, <span class="at">colour =</span> scaling)) <span class="sc">+</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">1</span>, <span class="at">alpha =</span> .<span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">linewidth =</span> <span class="fl">0.8</span>, <span class="at">alpha =</span> .<span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_manual</span>(</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">values =</span> <span class="fu">c</span>(<span class="st">"grey20"</span>, <span class="st">"#026E99"</span>, <span class="st">"#D93649"</span>),</span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">labels =</span> snakecase<span class="sc">::</span>to_title_case</span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> </span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Scaling Effects on the Desirability Score of Shots/90"</span>,</span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> </span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>      stringr<span class="sc">::</span><span class="fu">str_wrap</span>(</span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a>        glue<span class="sc">::</span><span class="fu">glue</span>(</span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a>          <span class="st">"The unscaled desirability function is a linear transformation of "</span>,</span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a>          <span class="st">"shots per 90, while the rescaled functions are non-linear, with "</span>,</span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a>          <span class="st">"scaling values &gt; 1 making higher desirability more difficult to "</span>,</span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true" tabindex="-1"></a>          <span class="st">"satisfy and values &lt; 1 making it easier."</span></span>
<span id="cb5-32"><a href="#cb5-32" aria-hidden="true" tabindex="-1"></a>          ),</span>
<span id="cb5-33"><a href="#cb5-33" aria-hidden="true" tabindex="-1"></a>        <span class="at">width =</span> <span class="dv">95</span></span>
<span id="cb5-34"><a href="#cb5-34" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb5-35"><a href="#cb5-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Shots/90"</span>, <span class="at">y =</span> <span class="st">"Desirability"</span>,</span>
<span id="cb5-36"><a href="#cb5-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> </span>
<span id="cb5-37"><a href="#cb5-37" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Visualisation: Paul Johnson  |  Data: FB Ref Via {worldfootballR}"</span></span>
<span id="cb5-38"><a href="#cb5-38" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="index_files/figure-html/scaling-shots-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1"><img src="index_files/figure-html/scaling-shots-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<p>When scaling desirability functions I think it is important to recognise the effects that imposing a non-linear transformation has. Because I’ve used the <code>use_data = TRUE</code> argument in <code>d_max()</code>, the maximum and minimum value in each desirability function is set by the data, meaning that regardless of the scaling applied the maximum value will still be 1 and the minimum value will be 0. However, as the scale increases, this will make it much harder for values to reach higher desirability scores, meaning that lower values of the corresponding variable will be given lower scores, but the non-linearity imposed increases the rate of desirability increases at higher values of the corresponding variable.</p>
<p>It is important to realise that making maximal desirability harder in this non-linear fashion does not downweight the highest values of that variable. Instead, it actually increases the magnitude of those highest values, because so few other observations are similarly high! Therefore, if you want to downweight the value of a particular variable in the overall desirability score, it needs to be easier to reach maximal desirability, because all values of that variable will have a higher score and that will give the highest values less leverage.</p>
<p>I think it is a little difficult to process the exponential effects of <span class="math inline">\(s\)</span> in this context. We are primarily interested in the highest values of each desirability function, given that the focus is on building a rating system, and increasing <span class="math inline">\(s\)</span> achieves our goals at the top-end of the ratings, but it obviously feels a little wonky to exponentially increase the value of a particular desirability function in order to downweight it in the overall desirability score! I think it is sensible to visualise the effects that your intended scaling will have, so as to help you think through the choices you’re making.</p>
</section>
</section>
<section id="chance-creation" class="level2">
<h2 class="anchored" data-anchor-id="chance-creation">Chance Creation</h2>
<p>If doing goals is the most important part of an offense in football, then helping others do goals must be the next best thing. Which brings us to chance creation. The process for creating a rating system for chance creation is more or less the same as with goal scoring. I’ve selected three variables that will go into the chance creation ratings - assists, expected assists (xA), and shot-creating actions (SCA).</p>
<p>In this case, the SCA desirability function has been scaled to reduce SCA’s effect on the overall score but assists and expected assists are unscaled. While I think that shot-creating actions are not quite as valuable as assists, I don’t want to exponentially increase the value of assists and expected assists at the top end of the desirability score. Goalscoring is the most important part of football, so I think small increases in the per 90 rate of goalscoring should be rewarded greatly, but creating chances, while still very important, is still reliant on the player receiving the ball putting it away, and I think the decisions made here reflect that.</p>
<p>Just as with the goal threat component, the choices I’ve made here are more of an art than a science, and I think I could easily be convinced that the way I’ve structured the desirability functions for chance creation are incorrect. Unfortunately for you, I’m not actually having that debate, so I went ahead and made my own choice. It’s probably wrong. <a href="#tbl-chance-creation" class="quarto-xref">Table&nbsp;2</a> shows the results of my poor choices, in life and in this blog post.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>chance_creation <span class="ot">&lt;-</span> </span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  big_five_stats <span class="sc">|&gt;</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">.cols =</span> <span class="fu">c</span>(ast90, xa90),</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>      <span class="sc">~</span> <span class="fu">d_max</span>(.x, <span class="at">use_data =</span> <span class="cn">TRUE</span>),</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">.names =</span> <span class="st">"d_{.col}"</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">d_sca90 =</span> <span class="fu">d_max</span>(sca90, <span class="at">use_data =</span> <span class="cn">TRUE</span>, <span class="at">scale =</span> <span class="fl">0.5</span>),</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">d_chances =</span> <span class="fu">d_overall</span>(<span class="fu">across</span>(<span class="fu">starts_with</span>(<span class="st">"d_"</span>)), <span class="at">tolerance =</span> <span class="fl">0.1</span>)</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(player, position, team, league, <span class="fu">starts_with</span>(<span class="st">"d_"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename_at</span>(<span class="fu">vars</span>(player<span class="sc">:</span>league), snakecase<span class="sc">::</span>to_title_case) <span class="sc">|&gt;</span> </span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Assists"</span> <span class="ot">=</span> d_ast90,</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">"xA"</span> <span class="ot">=</span> d_xa90,</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>    <span class="st">"SCA"</span> <span class="ot">=</span> d_sca90,</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Overall"</span> <span class="ot">=</span> d_chances</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Overall))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Table Code (Click to Expand)</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>chance_creation <span class="sc">|&gt;</span> </span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>) <span class="sc">|&gt;</span> </span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">format_table</span>(<span class="at">cols =</span> <span class="dv">5</span><span class="sc">:</span><span class="dv">8</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="tbl-chance-creation" class="cell quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-chance-creation-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;2: Chance Creation Ratings
</figcaption>
<div aria-describedby="tbl-chance-creation-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<div id="oxsyxttozi" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#oxsyxttozi table {
  font-family: Poppins;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#oxsyxttozi thead, #oxsyxttozi tbody, #oxsyxttozi tfoot, #oxsyxttozi tr, #oxsyxttozi td, #oxsyxttozi th {
  border-style: none;
}

#oxsyxttozi p {
  margin: 0;
  padding: 0;
}

#oxsyxttozi .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: 100%;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#oxsyxttozi .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#oxsyxttozi .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#oxsyxttozi .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#oxsyxttozi .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#oxsyxttozi .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#oxsyxttozi .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#oxsyxttozi .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#oxsyxttozi .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#oxsyxttozi .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#oxsyxttozi .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#oxsyxttozi .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#oxsyxttozi .gt_spanner_row {
  border-bottom-style: hidden;
}

#oxsyxttozi .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#oxsyxttozi .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#oxsyxttozi .gt_from_md > :first-child {
  margin-top: 0;
}

#oxsyxttozi .gt_from_md > :last-child {
  margin-bottom: 0;
}

#oxsyxttozi .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#oxsyxttozi .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#oxsyxttozi .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#oxsyxttozi .gt_row_group_first td {
  border-top-width: 2px;
}

#oxsyxttozi .gt_row_group_first th {
  border-top-width: 2px;
}

#oxsyxttozi .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#oxsyxttozi .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#oxsyxttozi .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#oxsyxttozi .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#oxsyxttozi .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#oxsyxttozi .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#oxsyxttozi .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#oxsyxttozi .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#oxsyxttozi .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#oxsyxttozi .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#oxsyxttozi .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#oxsyxttozi .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#oxsyxttozi .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#oxsyxttozi .gt_left {
  text-align: left;
}

#oxsyxttozi .gt_center {
  text-align: center;
}

#oxsyxttozi .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#oxsyxttozi .gt_font_normal {
  font-weight: normal;
}

#oxsyxttozi .gt_font_bold {
  font-weight: bold;
}

#oxsyxttozi .gt_font_italic {
  font-style: italic;
}

#oxsyxttozi .gt_super {
  font-size: 65%;
}

#oxsyxttozi .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#oxsyxttozi .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#oxsyxttozi .gt_indent_1 {
  text-indent: 5px;
}

#oxsyxttozi .gt_indent_2 {
  text-indent: 10px;
}

#oxsyxttozi .gt_indent_3 {
  text-indent: 15px;
}

#oxsyxttozi .gt_indent_4 {
  text-indent: 20px;
}

#oxsyxttozi .gt_indent_5 {
  text-indent: 25px;
}
</style>

<table class="gt_table do-not-create-environment cell table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_col_headings gt_spanner_row">
<th rowspan="2" id="Player" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Player</th>
<th rowspan="2" id="Position" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Position</th>
<th rowspan="2" id="Team" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Team</th>
<th rowspan="2" id="League" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">League</th>
<th colspan="4" id="Desirability Scores" class="gt_center gt_columns_top_border gt_column_spanner_outer" data-quarto-table-cell-role="th" scope="colgroup"><span class="gt_column_spanner">Desirability Scores</span></th>
</tr>
<tr class="odd gt_col_headings">
<th id="Assists" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">Assists</th>
<th id="xA" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">xA</th>
<th id="SCA" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">SCA</th>
<th id="Overall" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">Overall</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="Player">Kevin De Bruyne</td>
<td class="gt_row gt_left" headers="Position">MF</td>
<td class="gt_row gt_left" headers="Team">Manchester City</td>
<td class="gt_row gt_left" headers="League">Premier League</td>
<td class="gt_row gt_center" headers="Assists">0.94</td>
<td class="gt_row gt_center" headers="xA">1.00</td>
<td class="gt_row gt_center" headers="SCA">1.00</td>
<td class="gt_row gt_center" headers="Overall">0.98</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Player">Neymar</td>
<td class="gt_row gt_left" headers="Position">MF</td>
<td class="gt_row gt_left" headers="Team">Paris S-G</td>
<td class="gt_row gt_left" headers="League">Ligue 1</td>
<td class="gt_row gt_center" headers="Assists">1.00</td>
<td class="gt_row gt_center" headers="xA">0.83</td>
<td class="gt_row gt_center" headers="SCA">0.97</td>
<td class="gt_row gt_center" headers="Overall">0.93</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Player">Lionel Messi</td>
<td class="gt_row gt_left" headers="Position">FW</td>
<td class="gt_row gt_left" headers="Team">Paris S-G</td>
<td class="gt_row gt_left" headers="League">Ligue 1</td>
<td class="gt_row gt_center" headers="Assists">0.80</td>
<td class="gt_row gt_center" headers="xA">0.98</td>
<td class="gt_row gt_center" headers="SCA">0.98</td>
<td class="gt_row gt_center" headers="Overall">0.91</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Player">Rémy Cabella</td>
<td class="gt_row gt_left" headers="Position">MF</td>
<td class="gt_row gt_left" headers="Team">Lille</td>
<td class="gt_row gt_left" headers="League">Ligue 1</td>
<td class="gt_row gt_center" headers="Assists">0.56</td>
<td class="gt_row gt_center" headers="xA">0.83</td>
<td class="gt_row gt_center" headers="SCA">0.99</td>
<td class="gt_row gt_center" headers="Overall">0.77</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Player">Thomas Müller</td>
<td class="gt_row gt_left" headers="Position">FW</td>
<td class="gt_row gt_left" headers="Team">Bayern Munich</td>
<td class="gt_row gt_left" headers="League">Bundesliga</td>
<td class="gt_row gt_center" headers="Assists">0.67</td>
<td class="gt_row gt_center" headers="xA">0.73</td>
<td class="gt_row gt_center" headers="SCA">0.84</td>
<td class="gt_row gt_center" headers="Overall">0.74</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Player">Antoine Griezmann</td>
<td class="gt_row gt_left" headers="Position">FW</td>
<td class="gt_row gt_left" headers="Team">Atlético Madrid</td>
<td class="gt_row gt_left" headers="League">La Liga</td>
<td class="gt_row gt_center" headers="Assists">0.78</td>
<td class="gt_row gt_center" headers="xA">0.60</td>
<td class="gt_row gt_center" headers="SCA">0.88</td>
<td class="gt_row gt_center" headers="Overall">0.74</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Player">Ousmane Dembélé</td>
<td class="gt_row gt_left" headers="Position">FW</td>
<td class="gt_row gt_left" headers="Team">Barcelona</td>
<td class="gt_row gt_left" headers="League">La Liga</td>
<td class="gt_row gt_center" headers="Assists">0.70</td>
<td class="gt_row gt_center" headers="xA">0.62</td>
<td class="gt_row gt_center" headers="SCA">0.91</td>
<td class="gt_row gt_center" headers="Overall">0.73</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Player">Rayan Cherki</td>
<td class="gt_row gt_left" headers="Position">MF</td>
<td class="gt_row gt_left" headers="Team">Lyon</td>
<td class="gt_row gt_left" headers="League">Ligue 1</td>
<td class="gt_row gt_center" headers="Assists">0.45</td>
<td class="gt_row gt_center" headers="xA">0.83</td>
<td class="gt_row gt_center" headers="SCA">0.97</td>
<td class="gt_row gt_center" headers="Overall">0.71</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Player">Kingsley Coman</td>
<td class="gt_row gt_left" headers="Position">FW</td>
<td class="gt_row gt_left" headers="Team">Bayern Munich</td>
<td class="gt_row gt_left" headers="League">Bundesliga</td>
<td class="gt_row gt_center" headers="Assists">0.50</td>
<td class="gt_row gt_center" headers="xA">0.79</td>
<td class="gt_row gt_center" headers="SCA">0.91</td>
<td class="gt_row gt_center" headers="Overall">0.71</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Player">Raphaël Guerreiro</td>
<td class="gt_row gt_left" headers="Position">DF</td>
<td class="gt_row gt_left" headers="Team">Dortmund</td>
<td class="gt_row gt_left" headers="League">Bundesliga</td>
<td class="gt_row gt_center" headers="Assists">0.73</td>
<td class="gt_row gt_center" headers="xA">0.60</td>
<td class="gt_row gt_center" headers="SCA">0.81</td>
<td class="gt_row gt_center" headers="Overall">0.71</td>
</tr>
</tbody><tfoot class="gt_sourcenotes">
<tr class="even">
<td colspan="8" class="gt_sourcenote">Source: FB Ref Via {worldfootballR}</td>
</tr>
</tfoot>

</table>

</div>
</div>
</div>
</figure>
</div>
</div>
<p>Again, the names at the top of the <a href="#tbl-chance-creation" class="quarto-xref">Table&nbsp;2</a> ratings give me confidence, especially the three names at the very top - Neymar, Kevin De Bruyne, and Lionel Messi. I don’t think there are any huge surprises in these ratings, perhaps with the exception of Rémy Cabella, who has some solid to very good creation numbers but wouldn’t necessarily be a name you’d immediately think of when thinking about the ten best creative players in the world. This is once again a reminder that Ligue 1 is very silly but is wonderfully chaotic.</p>
</section>
<section id="ball-progression" class="level2">
<h2 class="anchored" data-anchor-id="ball-progression">Ball Progression</h2>
<p>The final component, and possibly the most interesting of the three, is ball progression. The three variables included in the ball progression desirability function are progressive carries, passes, and receptions. Just as is the case with the previous two components, I’m sure you could include other variables as measures of ball progression, but I’m still too lazy to do that and I think a lot of those other variables would risk double-counting where those actions are picked up by one of the progression metrics.</p>
<p>I am particularly unsure about how to weight the value of progressive actions, especially progressive passing and receptions, which are connected actions. I could see an argument for giving less weight to progressive receptions, and treating carries and passes equally, but I could also see a case that progressive passes and receptions should be treated equally because both the passer and receiver have to do their job to make the progressive action successful. Given my uncertainty about this particular category, I’ve decided it is best to weight all three variables equally.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>ball_progression <span class="ot">&lt;-</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  big_five_stats <span class="sc">|&gt;</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>      <span class="fu">starts_with</span>(<span class="st">"prg"</span>),</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>      <span class="sc">~</span> <span class="fu">d_max</span>(.x, <span class="at">use_data =</span> <span class="cn">TRUE</span>),</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">.names =</span> <span class="st">"d_{.col}"</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">d_prg =</span> <span class="fu">d_overall</span>(<span class="fu">across</span>(<span class="fu">starts_with</span>(<span class="st">"d_"</span>)), <span class="at">tolerance =</span> <span class="fl">0.1</span>)</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(player, position, team, league, <span class="fu">starts_with</span>(<span class="st">"d_"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(d_prg)) <span class="sc">|&gt;</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename_at</span>(<span class="fu">vars</span>(player<span class="sc">:</span>league), snakecase<span class="sc">::</span>to_title_case) <span class="sc">|&gt;</span> </span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Progressive Carrying"</span> <span class="ot">=</span> d_prg_c90,</span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Progressive Passing"</span> <span class="ot">=</span> d_prg_p90,</span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Progressive Receptions"</span> <span class="ot">=</span> d_prg_r90,</span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Overall"</span> <span class="ot">=</span> d_prg</span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Table Code (Click to Expand)</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>ball_progression <span class="sc">|&gt;</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>) <span class="sc">|&gt;</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">format_table</span>(<span class="at">cols =</span> <span class="dv">5</span><span class="sc">:</span><span class="dv">8</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="tbl-ball-progression" class="cell quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-ball-progression-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;3: Ball Progression Ratings
</figcaption>
<div aria-describedby="tbl-ball-progression-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<div id="nusjbpdalz" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#nusjbpdalz table {
  font-family: Poppins;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#nusjbpdalz thead, #nusjbpdalz tbody, #nusjbpdalz tfoot, #nusjbpdalz tr, #nusjbpdalz td, #nusjbpdalz th {
  border-style: none;
}

#nusjbpdalz p {
  margin: 0;
  padding: 0;
}

#nusjbpdalz .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: 100%;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#nusjbpdalz .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#nusjbpdalz .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#nusjbpdalz .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#nusjbpdalz .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#nusjbpdalz .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#nusjbpdalz .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#nusjbpdalz .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#nusjbpdalz .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#nusjbpdalz .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#nusjbpdalz .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#nusjbpdalz .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#nusjbpdalz .gt_spanner_row {
  border-bottom-style: hidden;
}

#nusjbpdalz .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#nusjbpdalz .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#nusjbpdalz .gt_from_md > :first-child {
  margin-top: 0;
}

#nusjbpdalz .gt_from_md > :last-child {
  margin-bottom: 0;
}

#nusjbpdalz .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#nusjbpdalz .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#nusjbpdalz .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#nusjbpdalz .gt_row_group_first td {
  border-top-width: 2px;
}

#nusjbpdalz .gt_row_group_first th {
  border-top-width: 2px;
}

#nusjbpdalz .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#nusjbpdalz .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#nusjbpdalz .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#nusjbpdalz .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#nusjbpdalz .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#nusjbpdalz .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#nusjbpdalz .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#nusjbpdalz .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#nusjbpdalz .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#nusjbpdalz .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#nusjbpdalz .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#nusjbpdalz .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#nusjbpdalz .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#nusjbpdalz .gt_left {
  text-align: left;
}

#nusjbpdalz .gt_center {
  text-align: center;
}

#nusjbpdalz .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#nusjbpdalz .gt_font_normal {
  font-weight: normal;
}

#nusjbpdalz .gt_font_bold {
  font-weight: bold;
}

#nusjbpdalz .gt_font_italic {
  font-style: italic;
}

#nusjbpdalz .gt_super {
  font-size: 65%;
}

#nusjbpdalz .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#nusjbpdalz .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#nusjbpdalz .gt_indent_1 {
  text-indent: 5px;
}

#nusjbpdalz .gt_indent_2 {
  text-indent: 10px;
}

#nusjbpdalz .gt_indent_3 {
  text-indent: 15px;
}

#nusjbpdalz .gt_indent_4 {
  text-indent: 20px;
}

#nusjbpdalz .gt_indent_5 {
  text-indent: 25px;
}
</style>

<table class="gt_table do-not-create-environment cell table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_col_headings gt_spanner_row">
<th rowspan="2" id="Player" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Player</th>
<th rowspan="2" id="Position" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Position</th>
<th rowspan="2" id="Team" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Team</th>
<th rowspan="2" id="League" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">League</th>
<th colspan="4" id="Desirability Scores" class="gt_center gt_columns_top_border gt_column_spanner_outer" data-quarto-table-cell-role="th" scope="colgroup"><span class="gt_column_spanner">Desirability Scores</span></th>
</tr>
<tr class="odd gt_col_headings">
<th id="Progressive Carrying" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">Progressive Carrying</th>
<th id="Progressive Passing" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">Progressive Passing</th>
<th id="Progressive Receptions" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">Progressive Receptions</th>
<th id="Overall" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">Overall</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="Player">Rayan Cherki</td>
<td class="gt_row gt_left" headers="Position">MF</td>
<td class="gt_row gt_left" headers="Team">Lyon</td>
<td class="gt_row gt_left" headers="League">Ligue 1</td>
<td class="gt_row gt_center" headers="Progressive Carrying">0.81</td>
<td class="gt_row gt_center" headers="Progressive Passing">0.50</td>
<td class="gt_row gt_center" headers="Progressive Receptions">0.66</td>
<td class="gt_row gt_center" headers="Overall">0.64</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Player">Kingsley Coman</td>
<td class="gt_row gt_left" headers="Position">FW</td>
<td class="gt_row gt_left" headers="Team">Bayern Munich</td>
<td class="gt_row gt_left" headers="League">Bundesliga</td>
<td class="gt_row gt_center" headers="Progressive Carrying">0.79</td>
<td class="gt_row gt_center" headers="Progressive Passing">0.31</td>
<td class="gt_row gt_center" headers="Progressive Receptions">1.00</td>
<td class="gt_row gt_center" headers="Overall">0.62</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Player">Ousmane Dembélé</td>
<td class="gt_row gt_left" headers="Position">FW</td>
<td class="gt_row gt_left" headers="Team">Barcelona</td>
<td class="gt_row gt_left" headers="League">La Liga</td>
<td class="gt_row gt_center" headers="Progressive Carrying">1.00</td>
<td class="gt_row gt_center" headers="Progressive Passing">0.32</td>
<td class="gt_row gt_center" headers="Progressive Receptions">0.71</td>
<td class="gt_row gt_center" headers="Overall">0.61</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Player">Jack Grealish</td>
<td class="gt_row gt_left" headers="Position">FW</td>
<td class="gt_row gt_left" headers="Team">Manchester City</td>
<td class="gt_row gt_left" headers="League">Premier League</td>
<td class="gt_row gt_center" headers="Progressive Carrying">0.79</td>
<td class="gt_row gt_center" headers="Progressive Passing">0.30</td>
<td class="gt_row gt_center" headers="Progressive Receptions">0.72</td>
<td class="gt_row gt_center" headers="Overall">0.56</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Player">Kevin De Bruyne</td>
<td class="gt_row gt_left" headers="Position">MF</td>
<td class="gt_row gt_left" headers="Team">Manchester City</td>
<td class="gt_row gt_left" headers="League">Premier League</td>
<td class="gt_row gt_center" headers="Progressive Carrying">0.47</td>
<td class="gt_row gt_center" headers="Progressive Passing">0.67</td>
<td class="gt_row gt_center" headers="Progressive Receptions">0.48</td>
<td class="gt_row gt_center" headers="Overall">0.53</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Player">Kylian Mbappé</td>
<td class="gt_row gt_left" headers="Position">FW</td>
<td class="gt_row gt_left" headers="Team">Paris S-G</td>
<td class="gt_row gt_left" headers="League">Ligue 1</td>
<td class="gt_row gt_center" headers="Progressive Carrying">0.67</td>
<td class="gt_row gt_center" headers="Progressive Passing">0.28</td>
<td class="gt_row gt_center" headers="Progressive Receptions">0.79</td>
<td class="gt_row gt_center" headers="Overall">0.53</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Player">Rémy Cabella</td>
<td class="gt_row gt_left" headers="Position">MF</td>
<td class="gt_row gt_left" headers="Team">Lille</td>
<td class="gt_row gt_left" headers="League">Ligue 1</td>
<td class="gt_row gt_center" headers="Progressive Carrying">0.51</td>
<td class="gt_row gt_center" headers="Progressive Passing">0.60</td>
<td class="gt_row gt_center" headers="Progressive Receptions">0.46</td>
<td class="gt_row gt_center" headers="Overall">0.52</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Player">Neymar</td>
<td class="gt_row gt_left" headers="Position">MF</td>
<td class="gt_row gt_left" headers="Team">Paris S-G</td>
<td class="gt_row gt_left" headers="League">Ligue 1</td>
<td class="gt_row gt_center" headers="Progressive Carrying">0.51</td>
<td class="gt_row gt_center" headers="Progressive Passing">0.69</td>
<td class="gt_row gt_center" headers="Progressive Receptions">0.39</td>
<td class="gt_row gt_center" headers="Overall">0.52</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Player">Raphinha</td>
<td class="gt_row gt_left" headers="Position">FW</td>
<td class="gt_row gt_left" headers="Team">Barcelona</td>
<td class="gt_row gt_left" headers="League">La Liga</td>
<td class="gt_row gt_center" headers="Progressive Carrying">0.53</td>
<td class="gt_row gt_center" headers="Progressive Passing">0.31</td>
<td class="gt_row gt_center" headers="Progressive Receptions">0.78</td>
<td class="gt_row gt_center" headers="Overall">0.51</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Player">Vinicius Júnior</td>
<td class="gt_row gt_left" headers="Position">FW</td>
<td class="gt_row gt_left" headers="Team">Real Madrid</td>
<td class="gt_row gt_left" headers="League">La Liga</td>
<td class="gt_row gt_center" headers="Progressive Carrying">0.89</td>
<td class="gt_row gt_center" headers="Progressive Passing">0.17</td>
<td class="gt_row gt_center" headers="Progressive Receptions">0.84</td>
<td class="gt_row gt_center" headers="Overall">0.51</td>
</tr>
</tbody><tfoot class="gt_sourcenotes">
<tr class="even">
<td colspan="8" class="gt_sourcenote">Source: FB Ref Via {worldfootballR}</td>
</tr>
</tfoot>

</table>

</div>
</div>
</div>
</figure>
</div>
</div>
<p>Forwards dominated the first two components but <a href="#tbl-ball-progression" class="quarto-xref">Table&nbsp;3</a> is more diverse. This is to be expected, given that ball progression is often about moving the ball up the pitch to the forwards! <a href="#tbl-position-progression" class="quarto-xref">Table&nbsp;4</a> aggregates the ball progression desirability scores by position.</p>
<div class="cell">
<details class="code-fold">
<summary>Table Code (Click to Expand)</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>ball_progression <span class="sc">|&gt;</span> </span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), mean), <span class="at">.by =</span> Position) <span class="sc">|&gt;</span> </span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Overall)) <span class="sc">|&gt;</span> </span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">format_table</span>(<span class="at">cols =</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="tbl-position-progression" class="cell quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-position-progression-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;4: Ball Progression Desirability by Position
</figcaption>
<div aria-describedby="tbl-position-progression-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<div id="rtevtopeku" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#rtevtopeku table {
  font-family: Poppins;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#rtevtopeku thead, #rtevtopeku tbody, #rtevtopeku tfoot, #rtevtopeku tr, #rtevtopeku td, #rtevtopeku th {
  border-style: none;
}

#rtevtopeku p {
  margin: 0;
  padding: 0;
}

#rtevtopeku .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: 100%;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#rtevtopeku .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#rtevtopeku .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#rtevtopeku .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#rtevtopeku .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#rtevtopeku .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#rtevtopeku .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#rtevtopeku .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#rtevtopeku .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#rtevtopeku .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#rtevtopeku .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#rtevtopeku .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#rtevtopeku .gt_spanner_row {
  border-bottom-style: hidden;
}

#rtevtopeku .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#rtevtopeku .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#rtevtopeku .gt_from_md > :first-child {
  margin-top: 0;
}

#rtevtopeku .gt_from_md > :last-child {
  margin-bottom: 0;
}

#rtevtopeku .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#rtevtopeku .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#rtevtopeku .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#rtevtopeku .gt_row_group_first td {
  border-top-width: 2px;
}

#rtevtopeku .gt_row_group_first th {
  border-top-width: 2px;
}

#rtevtopeku .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#rtevtopeku .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#rtevtopeku .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#rtevtopeku .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#rtevtopeku .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#rtevtopeku .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#rtevtopeku .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#rtevtopeku .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#rtevtopeku .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#rtevtopeku .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#rtevtopeku .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#rtevtopeku .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#rtevtopeku .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#rtevtopeku .gt_left {
  text-align: left;
}

#rtevtopeku .gt_center {
  text-align: center;
}

#rtevtopeku .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#rtevtopeku .gt_font_normal {
  font-weight: normal;
}

#rtevtopeku .gt_font_bold {
  font-weight: bold;
}

#rtevtopeku .gt_font_italic {
  font-style: italic;
}

#rtevtopeku .gt_super {
  font-size: 65%;
}

#rtevtopeku .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#rtevtopeku .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#rtevtopeku .gt_indent_1 {
  text-indent: 5px;
}

#rtevtopeku .gt_indent_2 {
  text-indent: 10px;
}

#rtevtopeku .gt_indent_3 {
  text-indent: 15px;
}

#rtevtopeku .gt_indent_4 {
  text-indent: 20px;
}

#rtevtopeku .gt_indent_5 {
  text-indent: 25px;
}
</style>

<table class="gt_table do-not-create-environment cell table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_col_headings gt_spanner_row">
<th rowspan="2" id="Position" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Position</th>
<th colspan="4" id="Desirability Scores" class="gt_center gt_columns_top_border gt_column_spanner_outer" data-quarto-table-cell-role="th" scope="colgroup"><span class="gt_column_spanner">Desirability Scores</span></th>
</tr>
<tr class="odd gt_col_headings">
<th id="Progressive Carrying" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">Progressive Carrying</th>
<th id="Progressive Passing" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">Progressive Passing</th>
<th id="Progressive Receptions" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">Progressive Receptions</th>
<th id="Overall" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">Overall</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="Position">FW</td>
<td class="gt_row gt_center" headers="Progressive Carrying">0.31</td>
<td class="gt_row gt_center" headers="Progressive Passing">0.16</td>
<td class="gt_row gt_center" headers="Progressive Receptions">0.39</td>
<td class="gt_row gt_center" headers="Overall">0.26</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Position">MF</td>
<td class="gt_row gt_center" headers="Progressive Carrying">0.22</td>
<td class="gt_row gt_center" headers="Progressive Passing">0.35</td>
<td class="gt_row gt_center" headers="Progressive Receptions">0.17</td>
<td class="gt_row gt_center" headers="Overall">0.23</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Position">DF</td>
<td class="gt_row gt_center" headers="Progressive Carrying">0.16</td>
<td class="gt_row gt_center" headers="Progressive Passing">0.24</td>
<td class="gt_row gt_center" headers="Progressive Receptions">0.12</td>
<td class="gt_row gt_center" headers="Overall">0.18</td>
</tr>
</tbody><tfoot class="gt_sourcenotes">
<tr class="odd">
<td colspan="5" class="gt_sourcenote">Source: FB Ref Via {worldfootballR}</td>
</tr>
</tfoot>

</table>

</div>
</div>
</div>
</figure>
</div>
</div>
<p>The results are not shocking, but the marginal differences in progression by position are interesting. As expected, forwards are dominant in the receptions category, but the responsibilities for progressive carries are more evenly split, and forwards are third behind midfielders and defenders in progressive passing.</p>
</section>
<section id="overall-offensive-ratings" class="level2">
<h2 class="anchored" data-anchor-id="overall-offensive-ratings">Overall Offensive Ratings</h2>
<p>Having created desirability scores for each offensive component, we could combine all three into an overall offensive rating using <code>d_overall()</code>. I think this would be a reasonable choice when the assumption is that each category is equally important in the overall score, but as discussed already, I don’t think that’s the case here. I think goal threat matters most, and chance creation and ball progression are, while important enough to be the two other categories in the overall ratings, a little less important than goals.</p>
<p>Whether or not goals are more important than chance creation and ball progression is probably open to plenty of debate, but assuming that they are (because this is my blog and I said so), we have to weight the three categories to reflect this. Rather than overcomplicating things and trying to do this as part of the process within the desirability functions, I have downweighted chance creation and ball progression by multiplying them by 0.5.</p>
<p>Finally, I have opted for the arithmetic mean instead of the geometric mean, because I think the purpose of the geometric mean is of less value here.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>offensive_rating <span class="ot">&lt;-</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  goal_threat <span class="sc">|&gt;</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="st">"Goal Threat"</span> <span class="ot">=</span> Overall) <span class="sc">|&gt;</span> </span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">full_join</span>(chance_creation <span class="sc">|&gt;</span> <span class="fu">rename</span>(<span class="st">"Chance Creation"</span> <span class="ot">=</span> Overall)) <span class="sc">|&gt;</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">full_join</span>(ball_progression <span class="sc">|&gt;</span> <span class="fu">rename</span>(<span class="st">"Ball Progression"</span> <span class="ot">=</span> Overall)) <span class="sc">|&gt;</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># downweight chance creation and ball progression desirability scores</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(<span class="at">.cols =</span> <span class="fu">c</span>(<span class="st">"Chance Creation"</span>, <span class="st">"Ball Progression"</span>), <span class="sc">~</span> .x <span class="sc">*</span> <span class="fl">0.5</span>),</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">Overall =</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>      <span class="fu">d_overall</span>(</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>        <span class="fu">across</span>(<span class="at">.cols =</span> <span class="fu">c</span>(<span class="st">"Goal Threat"</span>, <span class="st">"Chance Creation"</span>, <span class="st">"Ball Progression"</span>)),</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">geometric =</span> <span class="cn">FALSE</span></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(</span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>    Player, Position, Team, League, <span class="st">"Goal Threat"</span>, </span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Chance Creation"</span>, <span class="st">"Ball Progression"</span>, Overall</span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span></span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Overall))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Table Code (Click to Expand)</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>offensive_rating <span class="sc">|&gt;</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>) <span class="sc">|&gt;</span> </span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">format_table</span>(<span class="at">cols =</span> <span class="dv">5</span><span class="sc">:</span><span class="dv">8</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="tbl-offensive-rating" class="cell quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-offensive-rating-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;5: Overall Offensive Ratings
</figcaption>
<div aria-describedby="tbl-offensive-rating-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<div id="smxpeknmsw" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#smxpeknmsw table {
  font-family: Poppins;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#smxpeknmsw thead, #smxpeknmsw tbody, #smxpeknmsw tfoot, #smxpeknmsw tr, #smxpeknmsw td, #smxpeknmsw th {
  border-style: none;
}

#smxpeknmsw p {
  margin: 0;
  padding: 0;
}

#smxpeknmsw .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: 100%;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#smxpeknmsw .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#smxpeknmsw .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#smxpeknmsw .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#smxpeknmsw .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#smxpeknmsw .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#smxpeknmsw .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#smxpeknmsw .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#smxpeknmsw .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#smxpeknmsw .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#smxpeknmsw .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#smxpeknmsw .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#smxpeknmsw .gt_spanner_row {
  border-bottom-style: hidden;
}

#smxpeknmsw .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#smxpeknmsw .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#smxpeknmsw .gt_from_md > :first-child {
  margin-top: 0;
}

#smxpeknmsw .gt_from_md > :last-child {
  margin-bottom: 0;
}

#smxpeknmsw .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#smxpeknmsw .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#smxpeknmsw .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#smxpeknmsw .gt_row_group_first td {
  border-top-width: 2px;
}

#smxpeknmsw .gt_row_group_first th {
  border-top-width: 2px;
}

#smxpeknmsw .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#smxpeknmsw .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#smxpeknmsw .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#smxpeknmsw .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#smxpeknmsw .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#smxpeknmsw .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#smxpeknmsw .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#smxpeknmsw .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#smxpeknmsw .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#smxpeknmsw .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#smxpeknmsw .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#smxpeknmsw .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#smxpeknmsw .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#smxpeknmsw .gt_left {
  text-align: left;
}

#smxpeknmsw .gt_center {
  text-align: center;
}

#smxpeknmsw .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#smxpeknmsw .gt_font_normal {
  font-weight: normal;
}

#smxpeknmsw .gt_font_bold {
  font-weight: bold;
}

#smxpeknmsw .gt_font_italic {
  font-style: italic;
}

#smxpeknmsw .gt_super {
  font-size: 65%;
}

#smxpeknmsw .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#smxpeknmsw .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#smxpeknmsw .gt_indent_1 {
  text-indent: 5px;
}

#smxpeknmsw .gt_indent_2 {
  text-indent: 10px;
}

#smxpeknmsw .gt_indent_3 {
  text-indent: 15px;
}

#smxpeknmsw .gt_indent_4 {
  text-indent: 20px;
}

#smxpeknmsw .gt_indent_5 {
  text-indent: 25px;
}
</style>

<table class="gt_table do-not-create-environment cell table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_col_headings gt_spanner_row">
<th rowspan="2" id="Player" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Player</th>
<th rowspan="2" id="Position" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Position</th>
<th rowspan="2" id="Team" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Team</th>
<th rowspan="2" id="League" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">League</th>
<th colspan="4" id="Desirability Scores" class="gt_center gt_columns_top_border gt_column_spanner_outer" data-quarto-table-cell-role="th" scope="colgroup"><span class="gt_column_spanner">Desirability Scores</span></th>
</tr>
<tr class="odd gt_col_headings">
<th id="Goal Threat" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">Goal Threat</th>
<th id="Chance Creation" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">Chance Creation</th>
<th id="Ball Progression" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">Ball Progression</th>
<th id="Overall" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">Overall</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="Player">Kylian Mbappé</td>
<td class="gt_row gt_left" headers="Position">FW</td>
<td class="gt_row gt_left" headers="Team">Paris S-G</td>
<td class="gt_row gt_left" headers="League">Ligue 1</td>
<td class="gt_row gt_center" headers="Goal Threat">0.91</td>
<td class="gt_row gt_center" headers="Chance Creation">0.25</td>
<td class="gt_row gt_center" headers="Ball Progression">0.26</td>
<td class="gt_row gt_center" headers="Overall">0.47</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Player">Lionel Messi</td>
<td class="gt_row gt_left" headers="Position">FW</td>
<td class="gt_row gt_left" headers="Team">Paris S-G</td>
<td class="gt_row gt_left" headers="League">Ligue 1</td>
<td class="gt_row gt_center" headers="Goal Threat">0.54</td>
<td class="gt_row gt_center" headers="Chance Creation">0.46</td>
<td class="gt_row gt_center" headers="Ball Progression">0.25</td>
<td class="gt_row gt_center" headers="Overall">0.41</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Player">Erling Haaland</td>
<td class="gt_row gt_left" headers="Position">FW</td>
<td class="gt_row gt_left" headers="Team">Manchester City</td>
<td class="gt_row gt_left" headers="League">Premier League</td>
<td class="gt_row gt_center" headers="Goal Threat">0.93</td>
<td class="gt_row gt_center" headers="Chance Creation">0.18</td>
<td class="gt_row gt_center" headers="Ball Progression">0.08</td>
<td class="gt_row gt_center" headers="Overall">0.40</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Player">Robert Lewandowski</td>
<td class="gt_row gt_left" headers="Position">FW</td>
<td class="gt_row gt_left" headers="Team">Barcelona</td>
<td class="gt_row gt_left" headers="League">La Liga</td>
<td class="gt_row gt_center" headers="Goal Threat">0.83</td>
<td class="gt_row gt_center" headers="Chance Creation">0.21</td>
<td class="gt_row gt_center" headers="Ball Progression">0.13</td>
<td class="gt_row gt_center" headers="Overall">0.39</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Player">Neymar</td>
<td class="gt_row gt_left" headers="Position">MF</td>
<td class="gt_row gt_left" headers="Team">Paris S-G</td>
<td class="gt_row gt_left" headers="League">Ligue 1</td>
<td class="gt_row gt_center" headers="Goal Threat">0.45</td>
<td class="gt_row gt_center" headers="Chance Creation">0.46</td>
<td class="gt_row gt_center" headers="Ball Progression">0.26</td>
<td class="gt_row gt_center" headers="Overall">0.39</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Player">Victor Osimhen</td>
<td class="gt_row gt_left" headers="Position">FW</td>
<td class="gt_row gt_left" headers="Team">Napoli</td>
<td class="gt_row gt_left" headers="League">Serie A</td>
<td class="gt_row gt_center" headers="Goal Threat">0.86</td>
<td class="gt_row gt_center" headers="Chance Creation">0.13</td>
<td class="gt_row gt_center" headers="Ball Progression">0.10</td>
<td class="gt_row gt_center" headers="Overall">0.36</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Player">Karim Benzema</td>
<td class="gt_row gt_left" headers="Position">FW</td>
<td class="gt_row gt_left" headers="Team">Real Madrid</td>
<td class="gt_row gt_left" headers="League">La Liga</td>
<td class="gt_row gt_center" headers="Goal Threat">0.65</td>
<td class="gt_row gt_center" headers="Chance Creation">0.21</td>
<td class="gt_row gt_center" headers="Ball Progression">0.20</td>
<td class="gt_row gt_center" headers="Overall">0.36</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Player">Kingsley Coman</td>
<td class="gt_row gt_left" headers="Position">FW</td>
<td class="gt_row gt_left" headers="Team">Bayern Munich</td>
<td class="gt_row gt_left" headers="League">Bundesliga</td>
<td class="gt_row gt_center" headers="Goal Threat">0.38</td>
<td class="gt_row gt_center" headers="Chance Creation">0.36</td>
<td class="gt_row gt_center" headers="Ball Progression">0.31</td>
<td class="gt_row gt_center" headers="Overall">0.35</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Player">Mohamed Salah</td>
<td class="gt_row gt_left" headers="Position">FW</td>
<td class="gt_row gt_left" headers="Team">Liverpool</td>
<td class="gt_row gt_left" headers="League">Premier League</td>
<td class="gt_row gt_center" headers="Goal Threat">0.56</td>
<td class="gt_row gt_center" headers="Chance Creation">0.27</td>
<td class="gt_row gt_center" headers="Ball Progression">0.21</td>
<td class="gt_row gt_center" headers="Overall">0.34</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Player">Kevin De Bruyne</td>
<td class="gt_row gt_left" headers="Position">MF</td>
<td class="gt_row gt_left" headers="Team">Manchester City</td>
<td class="gt_row gt_left" headers="League">Premier League</td>
<td class="gt_row gt_center" headers="Goal Threat">0.25</td>
<td class="gt_row gt_center" headers="Chance Creation">0.49</td>
<td class="gt_row gt_center" headers="Ball Progression">0.27</td>
<td class="gt_row gt_center" headers="Overall">0.34</td>
</tr>
</tbody><tfoot class="gt_sourcenotes">
<tr class="even">
<td colspan="8" class="gt_sourcenote">Source: FB Ref Via {worldfootballR}</td>
</tr>
</tfoot>

</table>

</div>
</div>
</div>
</figure>
</div>
</div>
<p>The old rule was that any metric not broken by Lionel Messi being so far ahead of everyone else is wrong, but Messi isn’t quite the freak of nature he once was. Nonetheless, Messi’s name being near the top of the ratings is a good sign, as is Mbappé and Haaland flanking him at the top. At a glance, there are few surprises in <a href="#tbl-offensive-rating" class="quarto-xref">Table&nbsp;5</a>.</p>
<p>Kingsley Coman making it into the top ten feels generous, but perhaps the biggest issue is the three Ligue 1 players in the top five. While those three players are exceptional, they seem to be rated a little too high. I think this points to the inevitable league effects compromising the ratings. The big five leagues have been treated equally and we know that isn’t really the case (Ligue 1 is probably the weakest of the five). A more precise approach would involve weighting by league strength, but that’s complicated and I don’t want to do it.</p>
<p>Nonetheless, I think the ratings look pretty reasonable, and when we split the top ten overall desirability scores into their component parts, visualised below, we can see how the three offensive components are balanced.</p>
<div class="cell">
<details class="code-fold">
<summary>Plot Code (Click to Expand)</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>offensive_rating <span class="sc">|&gt;</span> </span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>) <span class="sc">|&gt;</span> </span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">pivot_longer</span>(</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> <span class="dv">5</span><span class="sc">:</span><span class="dv">7</span>,  </span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="st">"component"</span>, </span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">"value"</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span> </span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">component =</span> </span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>      <span class="fu">factor</span>(</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>        component, </span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Goal Threat"</span>, <span class="st">"Chance Creation"</span>, <span class="st">"Ball Progression"</span>)</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span> </span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(Player, Overall), <span class="at">y =</span> value, <span class="at">fill =</span> component)) <span class="sc">+</span> </span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="fu">position_dodge2</span>(<span class="at">reverse =</span> <span class="cn">TRUE</span>), <span class="at">colour =</span> <span class="st">"grey20"</span>, <span class="at">linewidth =</span> <span class="fl">0.4</span>) <span class="sc">+</span></span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>, <span class="at">colour =</span> <span class="st">"grey20"</span>, <span class="at">linewidth =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">label_wrap</span>(<span class="dv">12</span>)) <span class="sc">+</span></span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#026E99"</span>, <span class="st">"#D93649"</span>, <span class="st">"#FCCE26"</span>)) <span class="sc">+</span></span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> </span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Component Desirability Scores for the Offensive Ratings' Best Players"</span>,</span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> </span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a>      stringr<span class="sc">::</span><span class="fu">str_wrap</span>(</span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a>        glue<span class="sc">::</span><span class="fu">glue</span>(</span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true" tabindex="-1"></a>          <span class="st">"The component desirability scores for the top ten players in the "</span>,</span>
<span id="cb13-28"><a href="#cb13-28" aria-hidden="true" tabindex="-1"></a>          <span class="st">"offensive ratings in the big five leagues for the 2022/23 season. "</span>,</span>
<span id="cb13-29"><a href="#cb13-29" aria-hidden="true" tabindex="-1"></a>          <span class="st">"The overall ratings are a weighted average of the desirability scores "</span>,</span>
<span id="cb13-30"><a href="#cb13-30" aria-hidden="true" tabindex="-1"></a>          <span class="st">"for goal threat (50%), chance creation (25%), and ball progression (25%)."</span></span>
<span id="cb13-31"><a href="#cb13-31" aria-hidden="true" tabindex="-1"></a>          ),</span>
<span id="cb13-32"><a href="#cb13-32" aria-hidden="true" tabindex="-1"></a>        <span class="at">width =</span> <span class="dv">95</span></span>
<span id="cb13-33"><a href="#cb13-33" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb13-34"><a href="#cb13-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">y =</span> <span class="st">"Desirability"</span>,</span>
<span id="cb13-35"><a href="#cb13-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> </span>
<span id="cb13-36"><a href="#cb13-36" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Visualisation: Paul Johnson  |  Data: FB Ref Via {worldfootballR}"</span></span>
<span id="cb13-37"><a href="#cb13-37" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb13-38"><a href="#cb13-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb13-39"><a href="#cb13-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.major.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb13-40"><a href="#cb13-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.ticks.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb13-41"><a href="#cb13-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(</span>
<span id="cb13-42"><a href="#cb13-42" aria-hidden="true" tabindex="-1"></a>      <span class="at">colour =</span> <span class="st">"grey30"</span>, <span class="at">size =</span> <span class="fu">rel</span>(<span class="fl">1.15</span>), <span class="at">hjust =</span> <span class="fl">0.5</span>, </span>
<span id="cb13-43"><a href="#cb13-43" aria-hidden="true" tabindex="-1"></a>      <span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">r =</span> <span class="sc">-</span><span class="dv">15</span>, <span class="at">l =</span> <span class="sc">-</span><span class="dv">8</span>), <span class="at">lineheight =</span> .<span class="dv">4</span></span>
<span id="cb13-44"><a href="#cb13-44" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb13-45"><a href="#cb13-45" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="index_files/figure-html/offensive-components-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-2"><img src="index_files/figure-html/offensive-components-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="limitations" class="level1">
<h1>Limitations</h1>
<p>I think the appeal of desirability functions is their simplicity, but this is also a constraint. As the complexity of the multivariate optimisation problem increases, the solutions will need to scale similarly. While desirability functions are a quick and easy optimisation method that can perform well in many contexts, I don’t think they’re suitable when dealing with the most complex, multidimensional problems. Developing a precise, reliable rating system for offensive players would probably involve doing something more complicated than desirability functions!</p>
<p>Scaling can improve the performance of desirability functions when dealing with complex optimisation problems, but deciding when and how to use them is difficult. It is more of an art than a science. Consequentially, scaling features risk encouraging searching for results that feel good. If you have theory-driven expectations of the weighted combination of a set of variables, you stand a better chance of avoiding results that confirm your biases but it is difficult to validate desirability functions outside of eyeballing the results and deciding whether they seem right.</p>
</section>
<section id="conclusion" class="level1">
<h1>Conclusion</h1>
<p>I am generally pretty sceptical of player rating systems in football. Capturing a multidimensional context like this is difficult using a single measure of player performance. And yet here I am, developing a player rating system that attempts to do exactly that! In my defense, I have at least limited these ratings to offense, which makes it slightly better<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a>, and it’s a lot easier to rate players over an entire season than a single match. But I’d take these results with a big pinch of salt. I would include several caveats if I released these ratings into the wild, for the non-nerds (there is no chance anyone but nerds is reading this). These ratings are going to be pretty noisy! That said, I don’t think the results are complete garbage, which meets the high standard I set for my work.</p>
<p>Hopefully, these ratings illustrate how desirability functions work and demonstrate that they could be appropriate in many situations. You don’t see desirability functions used very often, but they are quick and easy, and they can be pretty effective.</p>
</section>



<div id="quarto-appendix" class="default"><section id="acknowledgments" class="level1 appendix"><h2 class="anchored quarto-appendix-heading">Acknowledgments</h2><div class="quarto-appendix-contents">

<p>Preview image by <a href="https://unsplash.com/@dancristianpaduret">Dan Cristian Pădureț</a> on <a href="https://unsplash.com/photos/a-blackboard-with-a-bunch-of-diagrams-on-it-h3kuhYUCE9A">Unsplash</a>.</p>



</div></section><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-derringer1980" class="csl-entry" role="listitem">
Derringer, George, and Ronald Suich. 1980. <span>“Simultaneous Optimization of Several Response Variables.”</span> <em>Journal of Quality Technology</em> 12 (4): 214–19.
</div>
<div id="ref-harrington1965" class="csl-entry" role="listitem">
Harrington, E. C. 1965. <span>“The Desirability Function.”</span> <em>Industrial Quality Control</em> 21: 494–98.
</div>
<div id="ref-kuhn2016" class="csl-entry" role="listitem">
Kuhn, Max. 2016. <span>“The Desirability Package.”</span> <a href="https://cran.r-project.org/web/packages/desirability/vignettes/desirability.pdf">https://cran.r-project.org/web/packages/desirability/vignettes/desirability.pdf</a>.
</div>
<div id="ref-kuhn2023" class="csl-entry" role="listitem">
———. 2023. <span>“Desirability Functions for Multiparameter Optimization - /<span class="nocase">desirability2/</span>.”</span> <a href="https://desirability2.tidymodels.org/">https://desirability2.tidymodels.org/</a>.
</div>
<div id="ref-kuhn2019" class="csl-entry" role="listitem">
Kuhn, Max, and Kjell Johnson. 2019. <em>Feature Engineering and Selection: A Practical Approach for Predictive Models</em>. Taylor &amp; Francis. <a href="https://bookdown.org/max/FES/">https://bookdown.org/max/FES/</a>.
</div>
</div></section><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>With <span class="math inline">\(\boldsymbol{R}\)</span> variables being simultaneously optimised, denoted <span class="math inline">\(f_{r}(\boldsymbol{X})
(r = 1 ... R)\)</span>, each must be individually optimised using a desirability function that approaches 1 when <span class="math inline">\(f_{r}(\boldsymbol{X})\)</span> is optimal and approaches 0 when <span class="math inline">\(f_{r}(\boldsymbol{X})\)</span> is unacceptable. The optimisation function for minimising <span class="math inline">\(f_{r}(\boldsymbol{X})\)</span> <span class="citation" data-cites="kuhn2016">(<a href="#ref-kuhn2016" role="doc-biblioref">Kuhn 2016</a>)</span> is:</p>
<p><span class="math display">\[
\begin{equation}
  d_{r}^{min}=\begin{cases}
  0 &amp; \text{if $f_r(\boldsymbol{X}) &gt; B$}\\
  (\frac{f_{r}(\boldsymbol{X})-B}{A-B})^{s} &amp; \text{if $A \leq f_{r}(\boldsymbol{X}) \leq B$}\\
  1 &amp; \text{if $f_r(\boldsymbol{X}) &lt; A$}
  \end{cases}
\end{equation}
\]</span></p>
<p>where <span class="math inline">\(A\)</span> and <span class="math inline">\(B\)</span> specify the minimum and maximum value that <span class="math inline">\(f_{r}(\boldsymbol{X})\)</span> can reach, and <span class="math inline">\(s\)</span> is a scaling feature that makes it easier (<span class="math inline">\(s &gt; 1\)</span>) or harder (<span class="math inline">\(s &lt; 1\)</span>) to achieve maximal desirability.</p>
<p>The optimisation function for maximising <span class="math inline">\(f_{r}(\boldsymbol{X})\)</span> <span class="citation" data-cites="kuhn2016">(<a href="#ref-kuhn2016" role="doc-biblioref">Kuhn 2016</a>)</span> is:</p>
<p><span class="math display">\[
\begin{equation}
  d_{r}^{max}=\begin{cases}
  0 &amp; \text{if $f_r(\boldsymbol{X}) &lt; A$}\\
  (\frac{f_{r}(\boldsymbol{X})-A}{B-A})^{s} &amp; \text{if $A \leq f_{r}(\boldsymbol{X}) \leq B$}\\
  1 &amp; \text{if $f_r(\boldsymbol{X}) &gt; B$}
  \end{cases}
\end{equation}
\]</span></p>
<p>where <span class="math inline">\(A\)</span>, <span class="math inline">\(B\)</span>, and <span class="math inline">\(s\)</span> are again the minimum and maximum values and the scaling feature.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>The arithmetic mean is the typical mean average value that people are used to seeing, which sums all values and divides the sum by the sample size, <span class="math inline">\(n\)</span>, while the geometric mean multiplies all values, before taking the <span class="math inline">\(n\)</span>th root (the <span class="math inline">\(n\)</span> being the number of values multiplied) of that product. Both arithmetic and geometric mean are measures of central tendency, but geometric mean is more robust when dealing with non-independent values, less responsive to outliers, and more capable of handling skewed data.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>Defensive event data does not reflect performance and is more of a measure of team and player style.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a></div></div></section><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-johnson2024" class="csl-entry quarto-appendix-citeas" role="listitem">
Johnson, Paul. 2024. <span>“Developing Offensive Ratings Using
Desirability Functions.”</span> February 22, 2024. <a href="https://paulrjohnson.net/blog/2024-02-22-football-ratings-using-desirability-functions">https://paulrjohnson.net/blog/2024-02-22-football-ratings-using-desirability-functions</a>.
</div></div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>© 2024 Paul Johnson ∙ Made with <a href="https://quarto.org">Quarto</a></p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
    <a class="nav-link" href="../../contact.html">
<p>Contact</p>
</a>
  </li>  
    <li class="nav-item">
    <a class="nav-link" href="../../license.html">
<p>License</p>
</a>
  </li>  
</ul>
    </div>
  </div>
</footer>
<script>var lightboxQuarto = GLightbox({"selector":".lightbox","openEffect":"zoom","descPosition":"bottom","loop":false,"closeEffect":"zoom"});
window.onload = () => {
  lightboxQuarto.on('slide_before_load', (data) => {
    const { slideIndex, slideNode, slideConfig, player, trigger } = data;
    const href = trigger.getAttribute('href');
    if (href !== null) {
      const imgEl = window.document.querySelector(`a[href="${href}"] img`);
      if (imgEl !== null) {
        const srcAttr = imgEl.getAttribute("src");
        if (srcAttr && srcAttr.startsWith("data:")) {
          slideConfig.href = srcAttr;
        }
      }
    } 
  });

  lightboxQuarto.on('slide_after_load', (data) => {
    const { slideIndex, slideNode, slideConfig, player, trigger } = data;
    if (window.Quarto?.typesetMath) {
      window.Quarto.typesetMath(slideNode);
    }
  });

};
          </script>




</body></html>